(function(e){function n(n){for(var t,i,c=n[0],l=n[1],u=n[2],s=0,d=[];s<c.length;s++)i=c[s],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t]);f&&f(n);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],t=!0,c=1;c<r.length;c++){var l=r[c];0!==o[l]&&(t=!1)}t&&(a.splice(n--,1),e=i(i.s=r[0]))}return e}var t={},o={app:0},a=[];function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,n,r){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)i.d(r,t,function(n){return e[n]}.bind(null,t));return r},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var f=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,n,r){e.exports=r("56d7")},"1dd2":function(e,n,r){},"412d":function(e,n){(function(e){var n=e.noise={};function r(e,n,r){this.x=e,this.y=n,this.z=r}r.prototype.dot2=function(e,n){return this.x*e+this.y*n},r.prototype.dot3=function(e,n,r){return this.x*e+this.y*n+this.z*r};var t=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],o=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],a=new Array(512),i=new Array(512);n.seed=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var r;r=1&n?o[n]^255&e:o[n]^e>>8&255,a[n]=a[n+256]=r,i[n]=i[n+256]=t[r%12]}},n.seed(0);var c=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,u=1/3,f=1/6;function s(e){return e*e*e*(e*(6*e-15)+10)}function d(e,n,r){return(1-r)*e+r*n}n.simplex2=function(e,n){var r,t,o,u,f,s=(e+n)*c,d=Math.floor(e+s),v=Math.floor(n+s),m=(d+v)*l,g=e-d+m,x=n-v+m;g>x?(u=1,f=0):(u=0,f=1);var y=g-u+l,h=x-f+l,b=g-1+2*l,E=x-1+2*l;d&=255,v&=255;var w=i[d+a[v]],T=i[d+u+a[v+f]],A=i[d+1+a[v+1]],p=.5-g*g-x*x;p<0?r=0:(p*=p,r=p*p*w.dot2(g,x));var M=.5-y*y-h*h;M<0?t=0:(M*=M,t=M*M*T.dot2(y,h));var R=.5-b*b-E*E;return R<0?o=0:(R*=R,o=R*R*A.dot2(b,E)),70*(r+t+o)},n.simplex3=function(e,n,r){var t,o,c,l,s,d,v,m,g,x,y=(e+n+r)*u,h=Math.floor(e+y),b=Math.floor(n+y),E=Math.floor(r+y),w=(h+b+E)*f,T=e-h+w,A=n-b+w,p=r-E+w;T>=A?A>=p?(s=1,d=0,v=0,m=1,g=1,x=0):T>=p?(s=1,d=0,v=0,m=1,g=0,x=1):(s=0,d=0,v=1,m=1,g=0,x=1):A<p?(s=0,d=0,v=1,m=0,g=1,x=1):T<p?(s=0,d=1,v=0,m=0,g=1,x=1):(s=0,d=1,v=0,m=1,g=1,x=0);var M=T-s+f,R=A-d+f,_=p-v+f,D=T-m+2*f,P=A-g+2*f,L=p-x+2*f,C=T-1+3*f,F=A-1+3*f,z=p-1+3*f;h&=255,b&=255,E&=255;var S=i[h+a[b+a[E]]],U=i[h+s+a[b+d+a[E+v]]],O=i[h+m+a[b+g+a[E+x]]],I=i[h+1+a[b+1+a[E+1]]],B=.6-T*T-A*A-p*p;B<0?t=0:(B*=B,t=B*B*S.dot3(T,A,p));var N=.6-M*M-R*R-_*_;N<0?o=0:(N*=N,o=N*N*U.dot3(M,R,_));var V=.6-D*D-P*P-L*L;V<0?c=0:(V*=V,c=V*V*O.dot3(D,P,L));var q=.6-C*C-F*F-z*z;return q<0?l=0:(q*=q,l=q*q*I.dot3(C,F,z)),32*(t+o+c+l)},n.perlin2=function(e,n){var r=Math.floor(e),t=Math.floor(n);e-=r,n-=t,r&=255,t&=255;var o=i[r+a[t]].dot2(e,n),c=i[r+a[t+1]].dot2(e,n-1),l=i[r+1+a[t]].dot2(e-1,n),u=i[r+1+a[t+1]].dot2(e-1,n-1),f=s(e);return d(d(o,l,f),d(c,u,f),s(n))},n.perlin3=function(e,n,r){var t=Math.floor(e),o=Math.floor(n),c=Math.floor(r);e-=t,n-=o,r-=c,t&=255,o&=255,c&=255;var l=i[t+a[o+a[c]]].dot3(e,n,r),u=i[t+a[o+a[c+1]]].dot3(e,n,r-1),f=i[t+a[o+1+a[c]]].dot3(e,n-1,r),v=i[t+a[o+1+a[c+1]]].dot3(e,n-1,r-1),m=i[t+1+a[o+a[c]]].dot3(e-1,n,r),g=i[t+1+a[o+a[c+1]]].dot3(e-1,n,r-1),x=i[t+1+a[o+1+a[c]]].dot3(e-1,n-1,r),y=i[t+1+a[o+1+a[c+1]]].dot3(e-1,n-1,r-1),h=s(e),b=s(n),E=s(r);return d(d(d(l,m,h),d(u,g,h),E),d(d(f,x,h),d(v,y,h),E),b)}})(this)},"56d7":function(e,n,r){"use strict";r.r(n);r("e260"),r("e6cf"),r("cca6"),r("a79d");var t=r("2b0e"),o=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{attrs:{id:"app"}},[r("WebGl")],1)},a=[],i=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("canvas",{attrs:{width:e.canvasWidth,height:e.canvasHeight,id:"glcanvas"}}),r("table",[r("tr",[r("td",[e._v("Step 1:")]),r("td",[r("button",{on:{click:e.pickFile}},[e._v("File")]),e._v(" or "),r("button",{on:{click:e.enableMic}},[e._v("Mic")])])]),r("tr",[r("td",[e._v("Step 2:")]),r("td",[r("button",{on:{click:e.enableVr}},[e._v("Enter VR")])])])]),r("input",{ref:"file",staticStyle:{display:"none"},attrs:{id:"file",type:"file",name:"file",accept:"audio/*"},on:{change:e.enableMusic}})])},c=[],l=(r("d81d"),r("d3b7"),r("ac1f"),r("5319"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("b85c")),u="#version 300 es\nprecision highp float;\nprecision highp int;\n\nin vec4 aVertexPosition;\nin vec4 aVertexNormal;\nin vec2 aTextureCoordinates;\n\nuniform int uDrawMode;\nuniform float uDrawVariant;\nuniform sampler2D uAudioSampler;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uOrthoMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uModelMatrix;\nuniform vec3 uLightDirection;\nuniform float uTime;\n\nout vec4 vColor;\nout vec3 vNormal;\nout vec3 vLightDirection;\nout vec2 vTextureCoordinates;\nout vec4 vPosition;\n\n//#COMMON\n//#PERLIN\n//#HSL2RGB\n\nvoid main(void) {\n    vec2 tTextureCoordinates = aTextureCoordinates;\n\n    vPosition = uModelMatrix*aVertexPosition;\n\n    if(uDrawMode == DRAW_MODE_2D || uDrawMode == DRAW_MODE_2D_MIX) {\n        gl_Position = uOrthoMatrix * vPosition;\n        vTextureCoordinates = tTextureCoordinates;\n        return;\n    }\n    else {\n        mat4 viewProjectionMatrix = uProjectionMatrix * uViewMatrix;\n        float saturation = 4.0;\n\n        if (uDrawMode == DRAW_MODE_CYLINDER) {\n            float cx = aTextureCoordinates.x;\n            float cy = cos(aTextureCoordinates.y*PI);\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            vec4 audio = texture(uAudioSampler, vec2(angle, 0.0));\n\n            float time = uTime+audio.x*2.0;\n\n            // COLOR\n            float colorVelocity = 0.5;// color changes quicker\n            float colorFrequency = 0.2;// color is wider\n            vec3 noiseColor = vec3(\n                noise(vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n                noise(vec4(uDrawVariant, cx*colorFrequency, cy, colorVelocity*time))*saturation,\n                1.0\n            );\n            vColor.xyz = hsv2rgb(noiseColor);\n            vColor.w = 1.0;\n\n            // TEXTURE\n            float textureNoiseVelocity = 0.2;\n            float textureNoiseFrequency = 0.5;\n            vec2 noiseTexture = vec2(\n                noise(vec4(cx, cy, uTime*textureNoiseVelocity, uDrawVariant)*textureNoiseFrequency),\n                noise(vec4(uDrawVariant, cx, cy, uTime*textureNoiseVelocity)*textureNoiseFrequency)\n            );\n\n            vec2 textureVelocity = vec2(-1.0, 0.5);\n            float textureRotation = 0.5;\n            float textureWaveSize = 0.4;\n\n            vec2 dTextureCoordinates = uTime*textureVelocity + noiseTexture*textureWaveSize;\n            dTextureCoordinates.y=textureRotation*sin(dTextureCoordinates.y);\n            tTextureCoordinates += dTextureCoordinates;\n\n            // POSITION\n            float displacementAmplitude = 16.0;\n            float displacementFrequency = 0.05;\n            float displacementVelocity = 0.05;\n            vec4 displacement = displacementAmplitude * vec4(\n                noise(vec4(uDrawVariant, vPosition.y*displacementFrequency, 0.0, time*displacementVelocity)),\n                0.0,\n                noise(vec4(uDrawVariant, 0.0, vPosition.y*displacementFrequency, time*displacementVelocity)),\n                0.0\n            );\n            vPosition += displacement;\n        } else if (uDrawMode == DRAW_MODE_EDGES) {\n            float cx = aTextureCoordinates.x;\n            float cy = cos(aTextureCoordinates.y*PI);\n            vec4 audio = texture(uAudioSampler, vec2(cx, 0.0));\n\n            float time = uTime+audio.x*4.0;\n\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 0.1;// color is wider\n            vec3 noiseColor = vec3(\n                noise(1.0*vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n                1.0,\n                1.0\n            );\n\n            vColor.xyz = hsv2rgb(noiseColor);\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_SKY) {\n            float cx = 0.0;\n            float cy = cos(aTextureCoordinates.y*PI);\n            vec4 audio = texture(uAudioSampler, vec2(cy, 0.0));\n\n            float time = uTime+audio.x;\n\n            // COLOR\n            float colorVelocity = 0.5;// color changes quicker\n            float colorFrequency = 1.0;// color is wider\n            vec3 noiseColor = vec3(\n                noise(1.0*vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n                noise(1.0*vec4(uDrawVariant, cx*colorFrequency, cy, colorVelocity*time))*saturation,\n                1.0\n            );\n            vColor.xyz = hsv2rgb(noiseColor);\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_BILLBOARD) {\n            float cx = aTextureCoordinates.x;\n            float cy = aTextureCoordinates.y;\n            float time = uTime;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 0.1;// color is wider\n            vec3 noiseColor = vec3(\n            noise(vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n            1.0,\n            1.0\n            );\n            vColor.xyz = hsv2rgb(noiseColor);\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_MANDALA) {\n            vec4 audio = texture(uAudioSampler, vec2(0.0, 0.0));\n            float cx = aTextureCoordinates.x;\n            float cy = aTextureCoordinates.y;\n            float time = uTime+audio.x*4.0;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 32.0;// color is wider\n            vec3 noiseColor = vec3(\n                noise(vec4(cx*colorFrequency, cy*colorFrequency, time*colorVelocity, uDrawVariant)),\n                1.0,\n                1.0\n            );\n            vColor.xyz = hsv2rgb(noiseColor);\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_TORUS) {\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            vec4 audio = texture(uAudioSampler, vec2(angle, 0.0));\n            float cx = 0.0;\n            float cy = angle;\n            float time = uTime+audio.x;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 100.0;// color is wider\n            vec3 noiseColor = vec3(\n                noise(vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n                1.0,\n                1.0\n            );\n            vColor.xyz = hsv2rgb(noiseColor);\n            vColor.w = 0.5;\n\n            // POSITION\n            float displacementAmplitude = 8.0;\n            float displacementFrequency = 0.1;\n            float displacementVelocity = 2.0;\n            vec4 displacement = displacementAmplitude * vec4(\n                0.0,\n                (audio.x+audio.z*0.5)-1.0,\n                0.0,\n                0.0\n            );\n            vPosition += displacement;\n        }\n\n        mat3 vNormalMatrix = transpose(inverse(mat3(uModelMatrix)));\n        vNormal = normalize(vNormalMatrix * aVertexNormal.xyz);\n        gl_Position = viewProjectionMatrix * vPosition;\n        vTextureCoordinates = tTextureCoordinates;\n    }\n}",f="#version 300 es\nprecision highp float;\nprecision highp int;\n\nuniform int uDrawMode;\nuniform sampler2D uSampler[2];\nuniform sampler2D uAudioSampler;\n\nuniform bool uEnableLight;\nuniform float uTime;\nuniform vec3 uLightDirection;\nuniform vec3 uCameraPosition;\nuniform vec2 uCanvasSize;\n\nin vec3 vNormal;\nin vec2 vTextureCoordinates;\nin vec4 vColor;\nin vec4 vPosition;\n\nout vec4 fragColor;\n\n//#COMMON\n//#PERLIN\n//#HSL2RGB\n\nvoid main(void) {\n    vec4 color = vec4(1.0, 1.0, 1.0, 1.0);\n    vec2 textureCoordinates = vTextureCoordinates;\n\n\n    if (uDrawMode == DRAW_MODE_2D || uDrawMode == DRAW_MODE_2D_MIX) {\n        textureCoordinates.y = 1.0 - vTextureCoordinates.y;\n    }\n\n    if (uDrawMode == 1){\n        float n = noise(vec4(textureCoordinates, 0.0, uTime*0.1));\n        vec2 p = 2.0*textureCoordinates - vec2(1.0, 1.0);\n        float pd = clamp(length(p), 0.0, 1.0);\n        float pr = 1.0 - pd*pd*pd;\n\n        float pc = clamp(pr*n+pr*0.25, 0.0, 1.0);\n        color = vec4(1.0, pc*2.0, 0.0, pc);\n    } else if (uDrawMode == DRAW_MODE_CYLINDER) {\n        vec4 c = texture(uSampler[0], textureCoordinates);\n        color = c*vColor;\n    } else if (uDrawMode == DRAW_MODE_2D_MIX) {\n        vec4 maskColor = texture(uSampler[1], textureCoordinates);\n        if (maskColor.w > 0.0) {\n            vec4 sum = vec4(0.0);\n            vec2 delta = 1.0/uCanvasSize;\n            int count = 0;\n            int size = 3;\n            for (int i=-size; i <= size; ++i) {\n                for (int j=-size; j <= size; ++j) {\n                    sum += texture(uSampler[0], textureCoordinates+delta*vec2(i, j));\n                    ++count;\n                }\n            }\n            color = (sum / float(count)) + maskColor * 0.5+0.1;\n            color.w = 1.0;\n        } else {\n            color.w = 0.0;\n        }\n        fragColor = color;\n        return;\n    } else if (uDrawMode == DRAW_MODE_2D) {\n        color = texture(uSampler[0], textureCoordinates);\n        fragColor = color;\n        return;\n    } else if (uDrawMode == DRAW_MODE_TORUS) {\n        color = vColor;\n    } else {\n        color = texture(uSampler[0], textureCoordinates);\n    }\n\n\n    vec3 normal = normalize(vNormal);\n    if (uEnableLight) {\n        float dotFactor = dot(normal, -uLightDirection);\n        fragColor = color*vec4(dotFactor, dotFactor, dotFactor, 1.0);\n    } else {\n        fragColor = color;\n    }\n\n    if (uDrawMode == DRAW_MODE_MASK) {\n        vec3 vertexToCam = normalize(vPosition.xyz-uCameraPosition);\n        float edgeDot = abs(dot(vertexToCam, normal));\n        if (edgeDot < 0.3) {\n            fragColor *= 0.0;\n        }\n    }\n\n    if (uDrawMode == DRAW_MODE_EDGES) {\n\n        vec3 vertexToCam = normalize(vPosition.xyz-uCameraPosition);\n        float edgeDot = abs(dot(vertexToCam, normal));\n        if (edgeDot < 0.3) {\n            fragColor = vColor;\n        } else {\n            fragColor = vec4(0.0, 0.0, 0.0, 0.01);\n        }\n    }\n    if (uDrawMode == DRAW_MODE_SKY) {\n        float gradient = 150.0;\n        fragColor.xyz *= vColor.xyz;\n    }\n\n    if (uDrawMode == DRAW_MODE_BILLBOARD) {\n        fragColor.xyz *= vColor.xyz;\n    }\n\n    if (uDrawMode == DRAW_MODE_MANDALA) {\n        fragColor.xyz *= vColor.xyz;\n    }\n}",s="//\tClassic Perlin 3D Noise\n//\tby Stefan Gustavson\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec4 fade(vec4 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n#define PI 3.1415926535897932384626433832795\n\n\n\nfloat cnoise(vec4 P){\n  vec4 Pi0 = floor(P); // Integer part for indexing\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n  vec4 ixy00 = permute(ixy0 + iw0);\n  vec4 ixy01 = permute(ixy0 + iw1);\n  vec4 ixy10 = permute(ixy1 + iw0);\n  vec4 ixy11 = permute(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 / 7.0;\n  vec4 gy00 = floor(gx00) / 7.0;\n  vec4 gz00 = floor(gy00) / 6.0;\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 / 7.0;\n  vec4 gy01 = floor(gx01) / 7.0;\n  vec4 gz01 = floor(gy01) / 6.0;\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 / 7.0;\n  vec4 gy10 = floor(gx10) / 7.0;\n  vec4 gz10 = floor(gy10) / 6.0;\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 / 7.0;\n  vec4 gy11 = floor(gx11) / 7.0;\n  vec4 gz11 = floor(gy11) / 6.0;\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n\nfloat noise(vec4 p){\n    return  cnoise(p)\n            //+0.5*cnoise(p)\n            //+0.25*cnoise(p*2.0)\n           // +0.125*cnoise(p*4.0)\n           // +0.0625*cnoise(p*8.0)\n            //+0.03125*cnoise(p*16.0)\n            //+0.015625*cnoise(p*32.0)\n            //+0.0078125*cnoise(p*64.0)\n            ;\n}",d="float hue2rgb(float f1, float f2, float hue) {\n    if (hue < 0.0)\n    hue += 1.0;\n    else if (hue > 1.0)\n    hue -= 1.0;\n    float res;\n    if ((6.0 * hue) < 1.0)\n    res = f1 + (f2 - f1) * 6.0 * hue;\n    else if ((2.0 * hue) < 1.0)\n    res = f2;\n    else if ((3.0 * hue) < 2.0)\n    res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n    else\n    res = f1;\n    return res;\n}\n\nvec3 hsl2rgb(vec3 hsl) {\n    vec3 rgb;\n\n    if (hsl.y == 0.0) {\n        rgb = vec3(hsl.z); // Luminance\n    } else {\n        float f2;\n\n        if (hsl.z < 0.5)\n        f2 = hsl.z * (1.0 + hsl.y);\n        else\n        f2 = hsl.z + hsl.y - hsl.y * hsl.z;\n\n        float f1 = 2.0 * hsl.z - f2;\n\n        rgb.r = hue2rgb(f1, f2, hsl.x + (1.0/3.0));\n        rgb.g = hue2rgb(f1, f2, hsl.x);\n        rgb.b = hue2rgb(f1, f2, hsl.x - (1.0/3.0));\n    }\n    return rgb;\n}\n\nvec3 hsl2rgb(float h, float s, float l) {\n    return hsl2rgb(vec3(h, s, l));\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 hsv2rgb(float h, float s, float l) {\n    return hsv2rgb(vec3(h, s, l));\n}",v="#define DRAW_MODE_2D_MIX -3\n#define DRAW_MODE_2D -2\n#define DRAW_MODE_MASK -1\n#define DRAW_MODE_DEFAULT 0\n#define DRAW_MODE_CYLINDER 2\n#define DRAW_MODE_EDGES 3\n#define DRAW_MODE_SKY 4\n#define DRAW_MODE_BILLBOARD 5\n#define DRAW_MODE_TORUS 6\n#define DRAW_MODE_MANDALA 7",m=(r("25f0"),r("cfc3"),r("84c3"),r("44b4")),g=r("20e7"),x={initShaderProgram:function(e,n,r){var t=this.loadShader(e,e.VERTEX_SHADER,n),o=this.loadShader(e,e.FRAGMENT_SHADER,r),a=e.createProgram();return e.attachShader(a,t),e.attachShader(a,o),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(a)),null)},loadShader:function(e,n,r){var t=e.createShader(n);return e.shaderSource(t,r),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)?t:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(t)),e.deleteShader(t),null)},createState:function(e,n,r){return{time:0,delta:0,vrInitialized:!1,vrSession:null,vrSpace:null,animation:null,cleanDrawback:e,drawCallback:n,updateCallback:r,vrSupported:!1,map:{},tick:function(e){e*=.001,this.delta=e-this.time,this.time=e},log:""}},loopVr:function(e,n){function r(t,o){var a=o.session;n.vrInitialized&&(n.animation=a.requestAnimationFrame(r));var i=null;if(n.vrSpace&&o&&(i=o.getViewerPose(n.vrSpace)),n.tick(t),n.updateCallback(e,n),i){var c=a?a.renderState.baseLayer:null;for(var l in n.cleanDrawback(e,c.framebuffer),i.views){var u=i.views[l],f=c.getViewport(u);n.drawCallback(e,f,n,u.transform.inverse.matrix,u.projectionMatrix,c.framebuffer,l)}}}function t(e){}function o(o){return o.addEventListener("end",t),o.updateRenderState({baseLayer:new XRWebGLLayer(o,e)}),o.requestReferenceSpace("local").then((function(e){n.vrSession=o,console.log(e),n.vrSpace=e,n.animation=o.requestAnimationFrame(r)})),console.log(o),o}n.vrInitialized||(n.vrInitialized=!0,new m["a"],navigator.xr&&navigator.xr.isSessionSupported("immersive-vr").then((function(e){n.vrSupported=e,navigator.xr.requestSession("immersive-vr").then(o)})))},loop:function(e,n){function r(t){n.vrInitialized||(n.animation=requestAnimationFrame(r)),n.tick(t),n.updateCallback(e,n),n.cleanDrawback(e,null);var o={width:e.canvas.width,height:e.canvas.height,x:0,y:0};o.width&&o.height&&n.drawCallback(e,o,n,null,null,null,0)}n.animation=requestAnimationFrame(r)},getProgramInfo:function(e,n){return{program:n,time:0,attribLocations:{vertexPosition:e.getAttribLocation(n,"aVertexPosition"),vertexNormal:e.getAttribLocation(n,"aVertexNormal"),textureCoordinates:e.getAttribLocation(n,"aTextureCoordinates")},uniformLocations:{projectionMatrix:e.getUniformLocation(n,"uProjectionMatrix"),viewMatrix:e.getUniformLocation(n,"uViewMatrix"),modelMatrix:e.getUniformLocation(n,"uModelMatrix"),orthoMatrix:e.getUniformLocation(n,"uOrthoMatrix"),sampler:[e.getUniformLocation(n,"uSampler[0]"),e.getUniformLocation(n,"uSampler[1]")],enableLight:e.getUniformLocation(n,"uEnableLight"),drawMode:e.getUniformLocation(n,"uDrawMode"),drawVariant:e.getUniformLocation(n,"uDrawVariant"),time:e.getUniformLocation(n,"uTime"),lightDirection:e.getUniformLocation(n,"uLightDirection"),cameraPosition:e.getUniformLocation(n,"uCameraPosition"),canvasSize:e.getUniformLocation(n,"uCanvasSize"),audioSampler:e.getUniformLocation(n,"uAudioSampler")}}},createArrayBuffers:function(e,n,r,t,o,a){var i=o.length,c=e.createBuffer(),l=e.createBuffer(),u=e.createBuffer(),f=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),e.STATIC_DRAW),{ic:i,vb:c,nb:l,tb:f,ib:u,im:a}},createBillboard:function(e){var n=[1,-1,0,1,1,0,-1,1,0,-1,-1,0],r=[0,0,1,0,0,1,0,0,1,0,0,1],t=[1,1,1,0,0,0,0,1],o=[0,1,2,0,2,3];return this.createArrayBuffers(e,n,r,t,o,null)},getCylinderMesh:function(e,n){for(var r=[],t=[],o=[],a=[],i=128,c=16,l=.5,u=0;u<=i;++u)for(var f=0;f<=c;++f){var s=Math.sin(2*Math.PI*f/c),d=u*l,v=Math.cos(2*Math.PI*f/c);r.push(s),r.push(d),r.push(v),t.push(s),t.push(0),t.push(v),o.push(d),o.push(2*f/c)}for(var m=0;m<i;++m)for(var g=0;g<c;++g)a.push((m+0)*(c+1)+(g+0)),a.push((m+0)*(c+1)+(g+1)),a.push((m+1)*(c+1)+(g+1)),a.push((m+0)*(c+1)+(g+0)),a.push((m+1)*(c+1)+(g+1)),a.push((m+1)*(c+1)+(g+0));return this.createArrayBuffers(e,r,t,o,a,n)},getMesh:function(e,n){var r=n.geometry;if(!r||!r.attributes)return null;var t=r.attributes.position.array,o=r.attributes.normal.array,a=r.attributes.uv.array,i=r.index.array,c=n.material.map.image;return this.createArrayBuffers(e,t,o,a,i,this.loadImage(e,c))},getModel:function(e,n){var r,t=[],o=Object(l["a"])(n.scene.children);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=this.getMesh(e,a);null!=i&&t.push(i)}}catch(c){o.e(c)}finally{o.f()}return t},enableAttribs:function(e,n){e.enableVertexAttribArray(n.attribLocations.vertexPosition),e.enableVertexAttribArray(n.attribLocations.vertexNormal),e.enableVertexAttribArray(n.attribLocations.textureCoordinates)},disableAttribs:function(e,n){e.disableVertexAttribArray(n.attribLocations.vertexPosition),e.disableVertexAttribArray(n.attribLocations.vertexNormal),e.disableVertexAttribArray(n.attribLocations.textureCoordinates)},drawMesh:function(e,n,r,t,o,a){e.bindBuffer(e.ARRAY_BUFFER,r.vb),e.vertexAttribPointer(n.attribLocations.vertexPosition,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,r.nb),e.vertexAttribPointer(n.attribLocations.vertexNormal,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,r.tb),e.vertexAttribPointer(n.attribLocations.textureCoordinates,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.ib),o||(o=r.im),o||(o=0),a||(a=o),o&&(e.uniform1i(n.uniformLocations.sampler[0],0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,o)),a&&(e.uniform1i(n.uniformLocations.sampler[1],1),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,a)),e.drawElements(t,r.ic,e.UNSIGNED_SHORT,0)},enableVr:function(e){e.vrInit=!0},isPowerOf2:function(e){return 0===(e&e-1)},generateMipmap:function(e,n){this.isPowerOf2(n.width)&&this.isPowerOf2(n.height)?(e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},bindAudioTexture:function(e,n,r){e.uniform1i(n.uniformLocations.audioSampler,2),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,r)},loadAudio:function(e,n,r,t){e.bindTexture(e.TEXTURE_2D,n);var o=0,a=e.RGB,i=1,c=0,l=e.RGB,u=e.UNSIGNED_BYTE;e.texImage2D(e.TEXTURE_2D,o,a,r,i,c,l,u,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)},loadImage:function(e,n){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var t=0,o=e.RGBA,a=1,i=1,c=0,l=e.RGBA,u=e.UNSIGNED_BYTE,f=new Uint8Array([0,0,0,255]);return e.texImage2D(e.TEXTURE_2D,t,o,a,i,c,l,u,f),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,t,o,l,u,n),this.generateMipmap(e,n),r},loadTexture:function(e,n){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var t=0,o=e.RGBA,a=1,i=1,c=0,l=e.RGBA,u=e.UNSIGNED_BYTE,f=new Uint8Array([0,0,0,255]);e.texImage2D(e.TEXTURE_2D,t,o,a,i,c,l,u,f);var s=new Image,d=this;return s.onload=function(){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,t,o,l,u,s),d.generateMipmap(e,s)},s.src=n,r},getBillboardMatrix:function(e,n,r){var t=g["b"].subtract(g["b"].create(),n,e),o=g["b"].normalize(t,t),a=g["b"].cross(g["b"].create(),r,o),i=g["b"].cross(g["b"].create(),o,a);return g["a"].fromValues(a[0],a[1],a[2],0,i[0],i[1],i[2],0,o[0],o[1],o[2],0,e[0],e[1],e[2],1)},createFramebuffer:function(e,n,r){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);var o=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,o),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n,r);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,o);var i=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.FRAMEBUFFER_COMPLETE!==i&&console.error("ERROR",i.toString()),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),{texture:t,render:o,frame:a,width:n,height:r}},deleteFramebuffer:function(e,n){n.frame&&e.deleteFramebuffer(n.frame),n.texture&&e.deleteTexture(n.texture),n.render&&e.deleteRenderbuffer(n.render)},getFramebufferTexture:function(e){return e.getFramebufferAttachmentParameter(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME)}},y={initializeArray:function(e){for(var n=0;n<e.length;++n)e[n]=0},clamp:function(e,n,r){return e<n?n:e>r?r:e},myNoise3d:function(e,n,r,t,o){var a=e.simplex3(n/o,r/o,t/o);return.5*(a+1)},myNoise3dx:function(e,n,r,t,o){for(var a=o,i=.5,c=0,l=0;l<7;++l)c+=i*this.myNoise3d(e,n,r,t,a),a*=.5,i*=.5;return c},updateAudioArray:function(e,n,r,t,o,a){var i=new Uint8Array(3*n);e&&(e.getByteTimeDomainData(r),e.getByteFrequencyData(t));for(var c=1/n,l=0;l<n;++l)i[3*l+0]=r[l],i[3*l+1]=t[l],i[3*l+2]=255*this.myNoise3dx(o,a,l*c,0,.1);return i}},h=r("412d"),b=r.n(h),E=r("bd2e"),w=r.n(E),T=-3,A=-2,p=-1,M=0,R=2,_=3,D=4,P=5,L=6,C=7,F={name:"WebGl",data:function(){return{canvasWidth:512,canvasHeight:512,state:null,gl:null,source:null,isPlaying:!1,audioContext:null,analyser:null,freqArray:null,dataArray:null,audioArray:null,timeDisplacement:0}},methods:{enableVr:function(){x.loopVr(this.gl,this.state)},enableMic:function(){function e(e){this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.freqArray=new Uint8Array(this.analyser.frequencyBinCount),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),console.log(this),y.initializeArray(this.freqArray),y.initializeArray(this.dataArray),this.source=this.audioContext.createMediaStreamSource(e),this.source.connect(this.analyser),this.isPlaying=!0}this.audioContext||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e.bind(this)))},pickFile:function(){this.$refs.file.click()},enableMusic:function(e){this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.freqArray=new Uint8Array(this.analyser.frequencyBinCount),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),console.log(this),y.initializeArray(this.freqArray),y.initializeArray(this.dataArray);var n=e.target.files[0];if(n){var r=new FileReader;r.readAsArrayBuffer(n),r.onload=function(e){var n=e.target.result;this.audioContext.decodeAudioData(n,function(e){console.log(this),this.source=this.audioContext.createBufferSource(),this.source.buffer=e,this.source.loop=!0,this.source.start(0),this.source.connect(this.analyser),this.analyser.connect(this.audioContext.destination)}.bind(this))}.bind(this)}}},mounted:function(){var e=document.querySelector("#glcanvas"),n=e.getContext("webgl2",{xrCompatible:!0});this.gl=n,e.addEventListener("contextmenu",(function(e){e.preventDefault()}));var r=f.replace("//#PERLIN",s).replace("//#COMMON",v).replace("//#HSL2RGB",d),t=u.replace("//#PERLIN",s).replace("//#COMMON",v).replace("//#HSL2RGB",d),o=x.initShaderProgram(n,t,r);n.useProgram(o);var a=x.getProgramInfo(n,o),i=g["b"].fromValues(-1,-1,-1);g["b"].normalize(i,i);var c=g["a"].ortho(g["a"].create(),-1,1,-1,1,-1,1);n.uniformMatrix4fv(a.uniformLocations.orthoMatrix,!1,c),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);var m=null,h=null,E=null,F=null,z=x.loadTexture(n,"models/pattern.png"),S=x.getCylinderMesh(n,z),U=x.loadTexture(n,"models/flare.png"),O=x.createBillboard(n),I=n.createTexture();b.a.noise.seed(Math.random());var B=new w.a;function N(e,n){if(this.audioContext){var r=this.dataArray.length;this.audioArray=y.updateAudioArray(this.analyser,r,this.dataArray,this.freqArray,b.a.noise,.05*n.time),x.loadAudio(e,I,r,this.audioArray),x.bindAudioTexture(e,a,I),this.timeDisplacement=0}}function V(e,n){e.bindFramebuffer(e.FRAMEBUFFER,n),e.clearColor(0,0,0,0),e.enable(e.DEPTH_TEST),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function q(e,n,r,t,o,c,u){x.enableAttribs(e,a),e.viewport(0,0,n.width,n.height);var f=r.map[u];f||(f={});var s=f.drawFrameBuffer,d=f.maskFrameBuffer,v=f.mixFrameBuffer;null!=s&&s.width===n.width&&s.height===n.height||(null!=s&&(x.deleteFramebuffer(e,s),x.deleteFramebuffer(e,d),x.deleteFramebuffer(e,v)),s=x.createFramebuffer(e,n.width,n.height),d=x.createFramebuffer(e,n.width,n.height),v=x.createFramebuffer(e,n.width,n.height)),V(e,s.frame),V(e,d.frame),V(e,v.frame),r.map[u]={drawFrameBuffer:s,maskFrameBuffer:d,mixFrameBuffer:v},e.bindFramebuffer(e.FRAMEBUFFER,s.frame),e.uniform1f(a.uniformLocations.time,r.time+this.timeDisplacement),e.uniform3fv(a.uniformLocations.lightDirection,i),e.uniform2f(a.uniformLocations.canvasSize,n.width,n.height);var y=0;if(null==t){t=g["a"].create();var b=g["b"].fromValues(0,-2,-5),w=g["b"].fromValues(0,1,0),z=g["b"].fromValues(-5*Math.sin(r.time),3,-5*Math.cos(r.time)-5);g["a"].lookAt(t,z,b,w)}null==o&&(o=g["a"].create(),g["a"].perspective(o,90*Math.PI/180,e.canvas.clientWidth/e.canvas.clientHeight,.1,1e3)),e.uniformMatrix4fv(a.uniformLocations.viewMatrix,!1,t),e.uniformMatrix4fv(a.uniformLocations.projectionMatrix,!1,o);var B=g["a"].invert(g["a"].create(),t),N=g["b"].fromValues(B[12],B[13],B[14]);e.uniform3fv(a.uniformLocations.cameraPosition,N);var q=g["a"].create(),W=g["b"].fromValues(0,0,-6);if(E){g["a"].identity(q),g["a"].scale(q,q,g["b"].fromValues(400,400,400)),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,D),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var X,G=Object(l["a"])(E);try{for(G.s();!(X=G.n()).done;){var k=X.value;x.drawMesh(e,a,k,e.TRIANGLES)}}catch(he){G.e(he)}finally{G.f()}}if(F&&this.audioContext){var H=g["b"].fromValues(0,0,0);g["b"].add(H,H,W),g["a"].identity(q),g["a"].translate(q,q,H),g["a"].scale(q,q,g["b"].fromValues(32,8,32)),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,L),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE);var j,Y=Object(l["a"])(F);try{for(Y.s();!(j=Y.n()).done;){var K=j.value;x.drawMesh(e,a,K,e.TRIANGLES)}}catch(he){Y.e(he)}finally{Y.f()}}e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,R);var $=20;y=0;for(var J=Math.PI/3;J<2*Math.PI-.001;J+=2*Math.PI/3){var Q=g["b"].fromValues(-$*Math.sin(J),-128,-$*Math.cos(J));g["a"].identity(q),g["b"].add(Q,Q,W),g["a"].translate(q,q,Q),g["a"].scale(q,q,g["b"].fromValues(4,4,4)),e.uniform1f(a.uniformLocations.drawVariant,4*++y),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),x.drawMesh(e,a,S,e.TRIANGLES)}var Z=g["b"].fromValues(0,1,0);e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,P),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),y=0;for(var ee=0;ee<2*Math.PI;ee+=Math.PI/8){var ne=4,re=g["b"].fromValues(ne*Math.cos(ee),8+Math.sin(4*r.time+2*ee),ne*Math.sin(ee));g["b"].add(re,re,W),q=x.getBillboardMatrix(re,N,Z),g["a"].scale(q,q,g["b"].fromValues(2,2,2)),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.uniform1f(a.uniformLocations.drawVariant,4*++y),x.drawMesh(e,a,O,e.TRIANGLES,U)}if(m){var te=g["b"].fromValues(0,-2.2,0);g["b"].add(te,te,W),g["a"].identity(q),g["a"].translate(q,q,te),g["a"].scale(q,q,g["b"].fromValues(8,8,8)),g["a"].rotateY(q,q,.1*-r.time),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,C),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var oe,ae=Object(l["a"])(m);try{for(ae.s();!(oe=ae.n()).done;){var ie=oe.value;x.drawMesh(e,a,ie,e.TRIANGLES)}}catch(he){ae.e(he)}finally{ae.f()}}if(h){e.bindFramebuffer(e.FRAMEBUFFER,d.frame);var ce=g["b"].fromValues(0,0,0);g["b"].add(ce,ce,W),g["a"].identity(q),g["a"].translate(q,q,ce),g["a"].rotateY(q,q,Math.PI/2-.1*r.time),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(a.uniformLocations.enableLight,1),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.uniform1i(a.uniformLocations.drawMode,p);var le,ue=Object(l["a"])(h);try{for(ue.s();!(le=ue.n()).done;){var fe=le.value;x.drawMesh(e,a,fe,e.TRIANGLES)}}catch(he){ue.e(he)}finally{ue.f()}}if(e.bindFramebuffer(e.FRAMEBUFFER,v.frame),g["a"].identity(q),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,T),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),x.drawMesh(e,a,O,e.TRIANGLES,s.texture,d.texture),h){e.bindFramebuffer(e.FRAMEBUFFER,s.frame);var se=g["b"].fromValues(0,0,0);g["b"].add(se,se,W),g["a"].identity(q),g["a"].translate(q,q,se),g["a"].rotateY(q,q,Math.PI/2-.1*r.time),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(a.uniformLocations.enableLight,1),e.uniform1i(a.uniformLocations.drawMode,_);var de,ve=Object(l["a"])(h);try{for(ve.s();!(de=ve.n()).done;){var me=de.value;x.drawMesh(e,a,me,e.TRIANGLES)}}catch(he){ve.e(he)}finally{ve.f()}}e.bindFramebuffer(e.FRAMEBUFFER,s.frame),g["a"].identity(q),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,A),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),x.drawMesh(e,a,O,e.TRIANGLES,v.texture);var ge=!1;if(ge&&O){var xe=g["b"].fromValues(0,1,0);e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,M),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var ye=x.getBillboardMatrix(g["b"].fromValues(2,0,-5),N,xe);g["a"].scale(ye,ye,g["b"].fromValues(2,2,2)),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,ye),e.uniform1f(a.uniformLocations.drawVariant,4*++y),x.drawMesh(e,a,O,e.TRIANGLES,I)}e.bindFramebuffer(e.FRAMEBUFFER,c),e.viewport(n.x,n.y,n.width,n.height),g["a"].identity(q),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,q),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,A),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),x.drawMesh(e,a,O,e.TRIANGLES,s.texture)}B.load("models/ganesha.gltf",(function(e){h=x.getModel(n,e)})),B.load("models/space.gltf",(function(e){E=x.getModel(n,e)})),B.load("models/mandala.gltf",(function(e){m=x.getModel(n,e)})),B.load("models/torus.gltf",(function(e){F=x.getModel(n,e)})),this.state=x.createState(V.bind(this),q.bind(this),N.bind(this)),x.loop(this.gl,this.state)}},z=F,S=(r("d7b9"),r("2877")),U=Object(S["a"])(z,i,c,!1,null,"28532d6a",null),O=U.exports,I={name:"App",components:{WebGl:O}},B=I,N=Object(S["a"])(B,o,a,!1,null,null,null),V=N.exports;t["a"].config.productionTip=!1,new t["a"]({render:function(e){return e(V)}}).$mount("#app")},d7b9:function(e,n,r){"use strict";var t=r("1dd2"),o=r.n(t);o.a}});
//# sourceMappingURL=app.80319ccf.js.map