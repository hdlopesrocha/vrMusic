(function(e){function n(n){for(var o,a,c=n[0],s=n[1],l=n[2],f=0,d=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);u&&u(n);while(d.length)d.shift()();return r.push.apply(r,l||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],o=!0,c=1;c<t.length;c++){var s=t[c];0!==i[s]&&(o=!1)}o&&(r.splice(n--,1),e=a(a.s=t[0]))}return e}var o={},i={app:0},r=[];function a(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=o,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)a.d(t,o,function(n){return e[n]}.bind(null,o));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var u=s;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";var o=t("85ec"),i=t.n(o);i.a},"3aee":function(e,n,t){"use strict";var o=t("5f8c"),i=t.n(o);i.a},"412d":function(e,n){(function(e){var n=e.noise={};function t(e,n,t){this.x=e,this.y=n,this.z=t}t.prototype.dot2=function(e,n){return this.x*e+this.y*n},t.prototype.dot3=function(e,n,t){return this.x*e+this.y*n+this.z*t};var o=[new t(1,1,0),new t(-1,1,0),new t(1,-1,0),new t(-1,-1,0),new t(1,0,1),new t(-1,0,1),new t(1,0,-1),new t(-1,0,-1),new t(0,1,1),new t(0,-1,1),new t(0,1,-1),new t(0,-1,-1)],i=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],r=new Array(512),a=new Array(512);n.seed=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var t;t=1&n?i[n]^255&e:i[n]^e>>8&255,r[n]=r[n+256]=t,a[n]=a[n+256]=o[t%12]}},n.seed(0);var c=.5*(Math.sqrt(3)-1),s=(3-Math.sqrt(3))/6,l=1/3,u=1/6;function f(e){return e*e*e*(e*(6*e-15)+10)}function d(e,n,t){return(1-t)*e+t*n}n.simplex2=function(e,n){var t,o,i,l,u,f=(e+n)*c,d=Math.floor(e+f),m=Math.floor(n+f),v=(d+m)*s,g=e-d+v,x=n-m+v;g>x?(l=1,u=0):(l=0,u=1);var y=g-l+s,h=x-u+s,b=g-1+2*s,p=x-1+2*s;d&=255,m&=255;var E=a[d+r[m]],P=a[d+l+r[m+u]],T=a[d+1+r[m+1]],A=.5-g*g-x*x;A<0?t=0:(A*=A,t=A*A*E.dot2(g,x));var w=.5-y*y-h*h;w<0?o=0:(w*=w,o=w*w*P.dot2(y,h));var _=.5-b*b-p*p;return _<0?i=0:(_*=_,i=_*_*T.dot2(b,p)),70*(t+o+i)},n.simplex3=function(e,n,t){var o,i,c,s,f,d,m,v,g,x,y=(e+n+t)*l,h=Math.floor(e+y),b=Math.floor(n+y),p=Math.floor(t+y),E=(h+b+p)*u,P=e-h+E,T=n-b+E,A=t-p+E;P>=T?T>=A?(f=1,d=0,m=0,v=1,g=1,x=0):P>=A?(f=1,d=0,m=0,v=1,g=0,x=1):(f=0,d=0,m=1,v=1,g=0,x=1):T<A?(f=0,d=0,m=1,v=0,g=1,x=1):P<A?(f=0,d=1,m=0,v=0,g=1,x=1):(f=0,d=1,m=0,v=1,g=1,x=0);var w=P-f+u,_=T-d+u,M=A-m+u,R=P-v+2*u,L=T-g+2*u,F=A-x+2*u,D=P-1+3*u,z=T-1+3*u,S=A-1+3*u;h&=255,b&=255,p&=255;var C=a[h+r[b+r[p]]],N=a[h+f+r[b+d+r[p+m]]],U=a[h+v+r[b+g+r[p+x]]],I=a[h+1+r[b+1+r[p+1]]],O=.6-P*P-T*T-A*A;O<0?o=0:(O*=O,o=O*O*C.dot3(P,T,A));var B=.6-w*w-_*_-M*M;B<0?i=0:(B*=B,i=B*B*N.dot3(w,_,M));var q=.6-R*R-L*L-F*F;q<0?c=0:(q*=q,c=q*q*U.dot3(R,L,F));var V=.6-D*D-z*z-S*S;return V<0?s=0:(V*=V,s=V*V*I.dot3(D,z,S)),32*(o+i+c+s)},n.perlin2=function(e,n){var t=Math.floor(e),o=Math.floor(n);e-=t,n-=o,t&=255,o&=255;var i=a[t+r[o]].dot2(e,n),c=a[t+r[o+1]].dot2(e,n-1),s=a[t+1+r[o]].dot2(e-1,n),l=a[t+1+r[o+1]].dot2(e-1,n-1),u=f(e);return d(d(i,s,u),d(c,l,u),f(n))},n.perlin3=function(e,n,t){var o=Math.floor(e),i=Math.floor(n),c=Math.floor(t);e-=o,n-=i,t-=c,o&=255,i&=255,c&=255;var s=a[o+r[i+r[c]]].dot3(e,n,t),l=a[o+r[i+r[c+1]]].dot3(e,n,t-1),u=a[o+r[i+1+r[c]]].dot3(e,n-1,t),m=a[o+r[i+1+r[c+1]]].dot3(e,n-1,t-1),v=a[o+1+r[i+r[c]]].dot3(e-1,n,t),g=a[o+1+r[i+r[c+1]]].dot3(e-1,n,t-1),x=a[o+1+r[i+1+r[c]]].dot3(e-1,n-1,t),y=a[o+1+r[i+1+r[c+1]]].dot3(e-1,n-1,t-1),h=f(e),b=f(n),p=f(t);return d(d(d(s,v,h),d(l,g,h),p),d(d(u,x,h),d(m,y,h),p),b)}})(this)},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("WebGl")],1)},r=[],a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.hidden?e._e():t("table",[t("tr",[t("td",[e._v("Step 1:")]),t("td",{attrs:{colspan:"2"}},[t("button",{on:{click:e.pickFile}},[e._v("File")]),e._v(" or "),t("button",{on:{click:e.enableMic}},[e._v("Mic")])])]),t("tr",[t("td",[e._v("Step 2:")]),t("td",{attrs:{colspan:"2"}},[t("button",{on:{click:e.enableVr}},[e._v("Enter VR")]),e._v(" or "),t("button",{on:{click:e.hideTable}},[e._v("Hide")])])]),e._m(0),e._m(1),t("tr",[t("td",[e._v("Blur:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.blurTransition,callback:function(n){e.blurTransition=n},expression:"blurTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.blurPeriod,expression:"blurPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.blurPeriod},on:{input:function(n){n.target.composing||(e.blurPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Cubes:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.cubesTransition,callback:function(n){e.cubesTransition=n},expression:"cubesTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cubesPeriod,expression:"cubesPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.cubesPeriod},on:{input:function(n){n.target.composing||(e.cubesPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Cylinders:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.cylindersTransition,callback:function(n){e.cylindersTransition=n},expression:"cylindersTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cylindersPeriod,expression:"cylindersPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.cylindersPeriod},on:{input:function(n){n.target.composing||(e.cylindersPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Hexagons:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.hexagonsTransition,callback:function(n){e.hexagonsTransition=n},expression:"hexagonsTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.hexagonsPeriod,expression:"hexagonsPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.hexagonsPeriod},on:{input:function(n){n.target.composing||(e.hexagonsPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Mandala:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.mandalaTransition,callback:function(n){e.mandalaTransition=n},expression:"mandalaTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mandalaPeriod,expression:"mandalaPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.mandalaPeriod},on:{input:function(n){n.target.composing||(e.mandalaPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Model:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.modelTransition,callback:function(n){e.modelTransition=n},expression:"modelTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.modelPeriod,expression:"modelPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.modelPeriod},on:{input:function(n){n.target.composing||(e.modelPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Neural:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.neuralTransition,callback:function(n){e.neuralTransition=n},expression:"neuralTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.neuralPeriod,expression:"neuralPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.neuralPeriod},on:{input:function(n){n.target.composing||(e.neuralPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Pyramids:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.pyramidsTransition,callback:function(n){e.pyramidsTransition=n},expression:"pyramidsTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pyramidsPeriod,expression:"pyramidsPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.pyramidsPeriod},on:{input:function(n){n.target.composing||(e.pyramidsPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Radial:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.radialTransition,callback:function(n){e.radialTransition=n},expression:"radialTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.radialPeriod,expression:"radialPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.radialPeriod},on:{input:function(n){n.target.composing||(e.radialPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("RGB:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.rgbTransition,callback:function(n){e.rgbTransition=n},expression:"rgbTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.rgbPeriod,expression:"rgbPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.rgbPeriod},on:{input:function(n){n.target.composing||(e.rgbPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Stars:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.starsTransition,callback:function(n){e.starsTransition=n},expression:"starsTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.starsPeriod,expression:"starsPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.starsPeriod},on:{input:function(n){n.target.composing||(e.starsPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Torus:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.torusTransition,callback:function(n){e.torusTransition=n},expression:"torusTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.torusPeriod,expression:"torusPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.torusPeriod},on:{input:function(n){n.target.composing||(e.torusPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Water:")]),t("td",[t("vue-slider",{staticStyle:{width:"100%"},attrs:{"min-range":1,"max-range":100},model:{value:e.waterTransition,callback:function(n){e.waterTransition=n},expression:"waterTransition"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.waterPeriod,expression:"waterPeriod"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.waterPeriod},on:{input:function(n){n.target.composing||(e.waterPeriod=n.target.value)}}})])]),t("tr",[t("td",[e._v("Mic Amplification:")]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.micAmp,expression:"micAmp"}],staticStyle:{width:"32px"},attrs:{type:"number"},domProps:{value:e.micAmp},on:{input:function(n){n.target.composing||(e.micAmp=n.target.value)}}})])])]),t("canvas",{attrs:{width:e.canvasWidth,height:e.canvasHeight,id:"glcanvas"}}),t("input",{ref:"file",staticStyle:{display:"none"},attrs:{id:"file",type:"file",name:"file",accept:"audio/*"},on:{change:e.enableMusic}})])},c=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("tr",[t("td",{attrs:{colspan:"3"}},[e._v(" Donate: "),t("ul",[t("li",[e._v("BTC: 37z5ap84nNA1VMrF8QNJ6XYVGrKn1GopKH")]),t("li",[e._v("ETH: 0x13CBcCCA8910DdCc007aa73eed031E2C7eE1Bf62")])])])])},function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("tr",[t("td",[t("b",[e._v("Effect")])]),t("td",[t("b",[e._v("Transition")])]),t("td",[t("b",[e._v("Period")])])])}],s=(t("d81d"),t("d3b7"),t("ac1f"),t("5319"),t("5cc6"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("3c5d"),t("2954"),t("649e"),t("219c"),t("170b"),t("b39a"),t("72f7"),t("b85c")),l="#version 300 es\nprecision highp float;\nprecision highp int;\n\nin vec4 aVertexPosition;\nin vec4 aVertexNormal;\nin vec2 aTextureCoordinates;\n\nuniform int uDrawMode;\nuniform float uDrawVariant;\nuniform float uEffectAmount;\nuniform sampler2D uAudioSampler;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uOrthoMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uModelMatrix;\nuniform vec3 uLightDirection;\nuniform float uTime;\nuniform float uTimeShift;\nuniform float uAnimationVelocity;\nuniform float uAudioLevel;\n\nout vec4 vColor;\nout vec3 vNormal;\nout vec3 vLightDirection;\nout vec2 vTextureCoordinates;\nout vec4 vPosition;\n\n//#COMMON\n//#PERLIN\n//#HSL2RGB\n\nvoid main(void) {\n    vec2 tTextureCoordinates = aTextureCoordinates;\n    vColor = vec4(1.0,1.0,1.0,1.0);\n    vPosition = uModelMatrix*aVertexPosition;\n\n    if(uDrawMode <= DRAW_MODE_2D) {\n        gl_Position = uOrthoMatrix * vPosition;\n        vTextureCoordinates.x = tTextureCoordinates.x;\n        vTextureCoordinates.y = 1.0 - tTextureCoordinates.y;\n        return;\n    }\n    else {\n        mat4 viewProjectionMatrix = uProjectionMatrix * uViewMatrix;\n        float saturation = 4.0;\n\n        if (uDrawMode == DRAW_MODE_3D_CYLINDER) {\n            float cx = aTextureCoordinates.x;\n            float cy = cos(aTextureCoordinates.y*2.0*PI);\n\n            float time = uTimeShift*uAnimationVelocity+uAudioLevel;\n\n            float timeGeometry = uTimeShift*uAnimationVelocity;\n\n            // COLOR\n            float colorVelocity = 0.5;// color changes quicker\n            float colorFrequency = 0.2;// color is wider\n            vColor.xyz = hsv2rgb(\n                noise(vec4(cx*colorFrequency, cy*colorFrequency, time*colorVelocity, uDrawVariant)),\n                1.0,\n                1.0\n            );\n            vColor.w = 1.0;\n\n            // TEXTURE\n            float textureNoiseVelocity = 0.2;\n            float textureNoiseFrequency = 0.5;\n            vec2 noiseTexture = vec2(\n                noise(vec4(cx, cy, timeGeometry*textureNoiseVelocity, uDrawVariant)*textureNoiseFrequency),\n                noise(vec4(uDrawVariant, cx, cy, timeGeometry*textureNoiseVelocity)*textureNoiseFrequency)\n            );\n            vec2 textureVelocity = vec2(-0.5, 0.1);\n            float textureRotation = 0.5;\n            float textureWaveSize = 0.4;\n\n            vec2 dTextureCoordinates = timeGeometry*textureVelocity + noiseTexture*textureWaveSize;\n            dTextureCoordinates.y=textureRotation*sin(dTextureCoordinates.y);\n            tTextureCoordinates += dTextureCoordinates;\n\n            // POSITION\n            float displacementAmplitude = 16.0;\n            float displacementFrequency = 0.05;\n            float displacementVelocity = 0.05;\n            vec4 displacement = displacementAmplitude * vec4(\n                noise(vec3(uDrawVariant, vPosition.y*displacementFrequency, timeGeometry*displacementVelocity)),\n                0.0,\n                noise(vec3(uDrawVariant, timeGeometry*displacementVelocity, vPosition.y*displacementFrequency)),\n                0.0\n            );\n            vPosition += displacement;\n        } else if (uDrawMode == DRAW_MODE_3D_EDGES) {\n            float cx = aTextureCoordinates.x;\n            float cy = cos(aTextureCoordinates.y*PI);\n            float time = uTime+uAudioLevel;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 0.1;// color is wider\n            vColor.xyz = hsv2rgb(\n                noise(vec3(cx*colorFrequency, cy*colorFrequency, time*colorVelocity)),\n                1.0,\n                1.0\n            );\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_3D_SKY) {\n            float cx = 0.0;\n            float cy = cos(aTextureCoordinates.y*PI*2.0);\n            float time = uTime+uAudioLevel;\n\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 0.5;// color is wider\n            vColor.xyz = hsv2rgb(\n                cos(noise(vec3(cy*colorFrequency, time*colorVelocity, 0.0))*PI*0.5),\n                noise(vec3(0.0, cy*colorFrequency, time*colorVelocity))*saturation,\n                1.0\n            );\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_3D_BILLBOARD) {\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            vec4 audio = texture(uAudioSampler, vec2(angle, 0.0));\n            float time = uTime+uAudioLevel;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 1.0;// color is wider\n            vColor.xyz = hsv2rgb(\n                noise(vec4(colorVelocity*angle, time*colorVelocity, 0.0, uDrawVariant)),\n                1.0,\n                1.0\n            );\n            vColor.w = 1.0;\n\n            // POSITION\n            float displacementAmplitude = 16.0;\n            float displacementFrequency = 0.1;\n            float displacementVelocity = 2.0;\n            vec4 displacement = displacementAmplitude * vec4(\n                0.0,\n                audio.x-0.5,\n                0.0,\n                0.0\n            );\n            vPosition += displacement;\n\n        } else if (uDrawMode == DRAW_MODE_3D_MANDALA) {\n            vec4 audio = texture(uAudioSampler, vec2(0.0, 0.0));\n            float cx = aTextureCoordinates.x;\n            float cy = aTextureCoordinates.y;\n            float time = uTime+uAudioLevel;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 32.0;// color is wider\n            vColor.xyz = hsv2rgb(\n                noise(vec3(cx*colorFrequency, cy*colorFrequency, time*colorVelocity)),\n                1.0,\n                1.0\n            );\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_3D_TORUS) {\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            vec4 audio = texture(uAudioSampler, vec2(angle, 0.0));\n            float cx = 0.0;\n            float cy = angle;\n            float time = uTime+uAudioLevel;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 100.0;// color is wider\n            vColor.xyz = hsv2rgb(\n                noise(vec3(cx*colorFrequency, cy, time*colorVelocity)),\n                1.0,\n                1.0\n            );\n            vColor.w =1.0;\n\n            // POSITION\n            float displacementAmplitude = 16.0;\n            float displacementFrequency = 0.1;\n            float displacementVelocity = 2.0;\n            vec4 displacement = displacementAmplitude * vec4(\n                0.0,\n                audio.x-0.5,\n                0.0,\n                0.0\n            );\n            vPosition += displacement;\n        } else if (uDrawMode == DRAW_MODE_3D_CUBE) {\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            float cx = 0.0;\n            float cy = angle;\n            float time = uTime+uAudioLevel;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 100.0;// color is wider\n            vColor.xyz = hsv2rgb(\n            noise(vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n            1.0,\n            1.0\n            );\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_3D_PYRAMID) {\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            float cx = 0.0;\n            float cy = angle;\n            float time = uTime+uAudioLevel;\n\n            // COLOR\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 100.0;// color is wider\n                vColor.xyz = hsv2rgb(\n                noise(vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n                1.0,\n                1.0\n            );\n            vColor.w = 1.0;\n        } else if (uDrawMode == DRAW_MODE_3D_SPHERICAL_GRID) {\n            float geometryVelocity = 0.2;// color changes quicker\n            float geometryFrequency = 800.0;// color is wider\n\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 0.4;// color is wider\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            float time = uTime+uAudioLevel;\n\n            float n = noise(vec4(vPosition.x*geometryFrequency, vPosition.y*geometryFrequency, vPosition.z*geometryFrequency, time*geometryVelocity));\n\n            float gx = noise(vec4(vPosition.y*geometryFrequency, vPosition.x*geometryFrequency, vPosition.z*geometryFrequency, time*geometryVelocity));\n            float gy = noise(vec4(vPosition.z*geometryFrequency, vPosition.x*geometryFrequency, vPosition.y*geometryFrequency, time*geometryVelocity));\n            float gz = noise(vec4(vPosition.z*geometryFrequency, vPosition.y*geometryFrequency,vPosition.x*geometryFrequency, time*geometryVelocity));\n\n            float cx = noise(vec4(vPosition.y*colorFrequency, vPosition.x*colorFrequency, vPosition.z*colorFrequency, time*colorVelocity));\n            float cy = noise(vec4(vPosition.z*colorFrequency, vPosition.x*colorFrequency, vPosition.y*colorFrequency, time*colorVelocity));\n\n            if(n<0.2){\n                vColor = vec4(0.0);\n            }else {\n                vColor.xyz = hsv2rgb(vec3(cx, cy*0.25+0.75, 1.0));\n                vColor.w = 1.0;\n            }\n\n            // POSITION\n            float displacementAmplitude = 0.5;\n            float displacementFrequency = 0.1;\n            float displacementVelocity = 2.0;\n            vec4 displacement = displacementAmplitude * vec4(\n                gx-0.5,\n                gy-0.5,\n                gz-0.5,\n                0.0\n            );\n            vPosition += displacement;\n        }else if (uDrawMode == DRAW_MODE_3D_HEXA_GRID) {\n            float geometryVelocity = 0.2;// color changes quicker\n            float geometryFrequency = 3.2;// color is wider\n\n            float colorVelocity = 0.2;// color changes quicker\n            float colorFrequency = 0.8;// color is wider\n            float angle = abs(atan(vPosition.z, vPosition.x))/PI;\n            float time = uTime+uAudioLevel;\n\n            float n = noise(vec4(vPosition.x*geometryFrequency, vPosition.y*geometryFrequency, vPosition.z*geometryFrequency, time*geometryVelocity));\n\n            float gx = noise(vec4(vPosition.y*geometryFrequency, vPosition.x*geometryFrequency, vPosition.z*geometryFrequency, time*geometryVelocity));\n            float gy = noise(vec4(vPosition.z*geometryFrequency, vPosition.x*geometryFrequency, vPosition.y*geometryFrequency, time*geometryVelocity));\n            float gz = noise(vec4(vPosition.z*geometryFrequency, vPosition.y*geometryFrequency,vPosition.x*geometryFrequency, time*geometryVelocity));\n\n            float cx = noise(vec4(vPosition.y*colorFrequency, vPosition.x*colorFrequency, vPosition.z*colorFrequency, time*colorVelocity));\n            float cy = noise(vec4(vPosition.z*colorFrequency, vPosition.x*colorFrequency, vPosition.y*colorFrequency, time*colorVelocity));\n\n            if(n<0.5){\n                vColor = vec4(0.0);\n            }else {\n                vColor.xyz = hsv2rgb(vec3(cx, cy*0.25+0.75, 1.0));\n                vColor.w = 1.0;\n            }\n\n            // POSITION\n            float displacementAmplitude = 0.1;\n            float displacementFrequency = 0.1;\n            float displacementVelocity = 2.0;\n            vec4 displacement = displacementAmplitude * vec4(\n                gx-0.5,\n                gy-0.5,\n                gz-0.5,\n                0.0\n            );\n            vPosition += displacement;\n        }\n\n            mat3 vNormalMatrix = transpose(inverse(mat3(uModelMatrix)));\n        vNormal = normalize(vNormalMatrix * aVertexNormal.xyz);\n        gl_Position = viewProjectionMatrix * vPosition;\n        vTextureCoordinates = tTextureCoordinates;\n    }\n}",u="#version 300 es\nprecision highp float;\nprecision highp int;\n\nuniform int uDrawMode;\nuniform sampler2D uSampler[2];\nuniform sampler2D uAudioSampler;\nuniform float uEffectAmount;\n\nuniform bool uEnableLight;\nuniform float uTime;\nuniform float uTimeShift;\nuniform float uAnimationVelocity;\nuniform float uAudioLevel;\nuniform vec3 uLightDirection;\nuniform vec3 uCameraPosition;\nuniform vec2 uCanvasSize;\n\nin vec3 vNormal;\nin vec2 vTextureCoordinates;\nin vec4 vColor;\nin vec4 vPosition;\n\nout vec4 fragColor;\n\n//#COMMON\n//#PERLIN\n//#HSL2RGB\n\nvec4 alphaBlend(vec4 color){\n    return vec4(color.x * color.w, color.y * color.w, color.z * color.w, color.w);\n}\n\nvec3 getPositionAtCoords(vec2 pos, float t) {\n    float height = noise(vec3(pos, t));\n    return vec3(pos, height);\n}\n\nvec3 getNormalAtPosition(vec2 position, float textureNoiseFrequency) {\n    float textureNoiseVelocity = 1.0;\n    vec2 d = 1.0/uCanvasSize;\n\n    vec3 p = getPositionAtCoords(textureNoiseFrequency*position, uTime*textureNoiseVelocity);\n    vec3 a = getPositionAtCoords(textureNoiseFrequency*position+ vec2(0.0, d.y), uTime*textureNoiseVelocity);\n    vec3 b = getPositionAtCoords(textureNoiseFrequency*position+ vec2(d.x, 0.0), uTime*textureNoiseVelocity);\n    vec3 n = normalize(cross(b-p,a-p));\n    return n;\n}\n\nfloat toGrayScale(vec3 color){\n    return max(color.x, max(color.y, color.z));\n}\n\n\nvec3 getPositionAtTexture(vec2 pos) {\n    vec4 color = texture(uSampler[1], pos);\n    float height = toGrayScale(color.xyz);\n    return vec3(pos, height);\n}\n\nvec3 getNormalAtTexture(vec2 pos) {\n    vec2 d = 1.0/uCanvasSize;\n    vec3 p = getPositionAtTexture(pos);\n    vec3 a = getPositionAtTexture(pos+ vec2(0.0, d.y));\n    vec3 b = getPositionAtTexture(pos+ vec2(d.x, 0.0));\n    vec3 n = normalize(cross(b-p,a-p));\n    return n;\n}\n\nvoid main(void) {\n    vec4 color = vec4(1.0, 1.0, 1.0, 1.0);\n    vec2 textureCoordinates = vTextureCoordinates;\n    bool skipEffect = false;\n\n    if (uDrawMode == DRAW_MODE_2D_BLUR) {\n        vec4 maskColor = texture(uSampler[1], textureCoordinates);\n        if (maskColor.x > 0.0) {\n            vec4 sum = vec4(0.0);\n            vec2 delta = 4.0/uCanvasSize;\n            int count = 0;\n            int size = 4;\n            for (int i=-size; i <= size; ++i) {\n                for (int j=-size; j <= size; ++j) {\n                    sum += texture(uSampler[0], textureCoordinates+delta*vec2(i, j));\n                    ++count;\n                }\n            }\n            color = (sum / float(count))*uEffectAmount+(1.0 - uEffectAmount)*texture(uSampler[0], textureCoordinates);\n            skipEffect=true;\n        } else {\n            color.w = 0.0;\n        }\n        fragColor = alphaBlend(color);\n        return;\n    } else if (uDrawMode == DRAW_MODE_3D_TORUS) {\n        color = vColor;\n    } else if (uDrawMode == DRAW_MODE_3D_EDGES) {\n        color = texture(uSampler[0], textureCoordinates);\n    } else if(uDrawMode == DRAW_MODE_2D_WATER){\n        vec3 normal = getNormalAtPosition(textureCoordinates, 48.0)-0.5;\n\n        vec2 dist = (vec2(0.5)-textureCoordinates);\n        float len = length(dist);\n        float p2c = 2.0*len / sqrt(2.0);\n        p2c*= p2c;\n        p2c*= p2c;\n\n        color = texture(uSampler[0], textureCoordinates+normal.xy*p2c*uEffectAmount);\n        color.xyz += p2c*uEffectAmount*0.5;\n        skipEffect = true;\n    } else if(uDrawMode == DRAW_MODE_2D_NORMAL){\n        vec3 normal = getNormalAtTexture(textureCoordinates);\n        vec2 delta = 32.0/uCanvasSize;\n\n        vec4 height = texture(uSampler[1], textureCoordinates);\n        float superficialRefraction = 1.0 - toGrayScale(height.xyz);\n\n\n        color = texture(uSampler[0], textureCoordinates+normal.xy*delta*uEffectAmount*superficialRefraction);\n\n        //color = texture(uSampler[1], textureCoordinates);\n\n        skipEffect = true;\n    } else if(uDrawMode == DRAW_MODE_2D_SHIFT){\n        float pixelShift = 8.0;\n        vec2 shift = uEffectAmount*pixelShift/uCanvasSize;\n\n        vec4 t1 = texture(uSampler[0], textureCoordinates+shift*vec2(-0.5,-0.5));\n        vec4 t2 = texture(uSampler[0], textureCoordinates+shift*vec2(1.0, 0.0));\n        vec4 t3 = texture(uSampler[0], textureCoordinates+shift*vec2(0.0, 1.0));\n\n        color.xyz = vec3(t1.x, t2.y, t3.z);\n        color.w = 1.0;\n        skipEffect = true;\n    } else if(uDrawMode == DRAW_MODE_2D_LENS){\n        vec2 dist = (vec2(0.5)-textureCoordinates);\n        float len = length(dist);\n        float p2c = 2.0*len / sqrt(2.0);\n        p2c*= p2c;\n        p2c*= p2c;\n\n        color.xyz = texture(uSampler[0], textureCoordinates+dist*p2c*uEffectAmount).xyz;\n        color.w = 1.0;\n        skipEffect = true;\n    } else if(uDrawMode == DRAW_MODE_2D_RADIAL){\n        vec2 delta = 4.0/uCanvasSize;\n\n        vec2 dist = (vec2(0.5)-textureCoordinates);\n        vec2 norm = normalize(dist);\n\n        float len = length(dist);\n        float p2c = 2.0*len / sqrt(2.0);\n        p2c*= p2c;\n        p2c*= p2c;\n\n        int maxIters= 32;\n        int iters = clamp(int( float(maxIters)*p2c*uEffectAmount ), 1, maxIters);\n        vec4 sum = vec4(0.0);\n        for(int i=0; i < iters; ++i){\n            sum += texture(uSampler[0], textureCoordinates+norm*delta*float(i));\n        }\n        sum /= float(iters);\n        color = sum;\n        skipEffect = true;\n    } else if (uDrawMode == DRAW_MODE_3D_SPHERICAL_GRID) {\n        if(vColor.w < 0.95){\n            color = vec4(0.0);\n        }else {\n            color = texture(uSampler[0], textureCoordinates)*vColor;\n        }\n    } else if (uDrawMode == DRAW_MODE_3D_HEXA_GRID) {\n        if(vColor.w < 0.95){\n            color = vec4(0.0);\n        }else {\n            color = texture(uSampler[0], textureCoordinates)*vColor;\n        }\n    } else {\n        color = texture(uSampler[0], textureCoordinates)*vColor;\n    }\n\n    vec3 normal = normalize(vNormal);\n    if (uEnableLight) {\n        float dotFactor = dot(normal, -uLightDirection);\n        color = color*vec4(dotFactor, dotFactor, dotFactor, 1.0);\n    }\n\n    if (uDrawMode == DRAW_MODE_2D_MIX){\n        color *= 0.5;\n        color.xyz += 0.3;\n    }\n    else if (uDrawMode == DRAW_MODE_3D_NO_EDGES_MASK || uDrawMode == DRAW_MODE_3D_EDGES) {\n        vec3 vertexToCam = normalize(vPosition.xyz-uCameraPosition);\n        float edgeDot = abs(dot(vertexToCam, normal));\n        float edgeFactor = 0.3;\n        if (uDrawMode == DRAW_MODE_3D_EDGES) {\n            color = edgeDot < edgeFactor ? vColor: vec4(0.0);\n        }else {\n            color = edgeDot < edgeFactor ? vec4(0.0) : vec4(1.0);\n        }\n    }\n\n    if (uDrawMode == DRAW_MODE_3D_SKY || uDrawMode == DRAW_MODE_3D_BILLBOARD || uDrawMode == DRAW_MODE_3D_MANDALA) {\n        color.xyz *= vColor.xyz;\n    }\n    if(!skipEffect) {\n        color.w *= uEffectAmount;\n    }\n    fragColor = alphaBlend(color);\n\n}",f="//\tClassic Perlin 3D Noise\n//\tby Stefan Gustavson\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec4 fade(vec4 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\nvec2 fade(vec2 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\nfloat cnoise(vec2 P){\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n  vec4 i = permute(permute(ix) + iy);\n  vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n  vec4 gy = abs(gx) - 0.5;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n  vec4 norm = 1.79284291400159 - 0.85373472095314 *\n  vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\nfloat cnoise(vec3 P){\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\nfloat cnoise(vec4 P){\n  vec4 Pi0 = floor(P); // Integer part for indexing\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n  vec4 ixy00 = permute(ixy0 + iw0);\n  vec4 ixy01 = permute(ixy0 + iw1);\n  vec4 ixy10 = permute(ixy1 + iw0);\n  vec4 ixy11 = permute(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 / 7.0;\n  vec4 gy00 = floor(gx00) / 7.0;\n  vec4 gz00 = floor(gy00) / 6.0;\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 / 7.0;\n  vec4 gy01 = floor(gx01) / 7.0;\n  vec4 gz01 = floor(gy01) / 6.0;\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 / 7.0;\n  vec4 gy10 = floor(gx10) / 7.0;\n  vec4 gz10 = floor(gy10) / 6.0;\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 / 7.0;\n  vec4 gy11 = floor(gx11) / 7.0;\n  vec4 gz11 = floor(gy11) / 6.0;\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n\n#define PERLIN_ITER 2\n/*\nfloat noise(vec4 p){\n    float f = 1.0;\n    float sum = 0.0;\n    for(int i =0; i < PERLIN_ITER; ++i) {\n      f *= 0.5;\n      sum += f * cnoise(p);\n      p *= 2.0;\n    }\n    sum += f * cnoise(p);\n    return sum+0.5;\n}\n\nfloat noise(vec3 p){\n  float f = 1.0;\n  float sum = 0.0;\n  for(int i =0; i < PERLIN_ITER; ++i) {\n    f *= 0.5;\n    sum += f * cnoise(p);\n    p *= 2.0;\n  }\n  sum += f * cnoise(p);\n  return sum+0.5;\n}\n\nfloat noise(vec2 p){\n  float f = 1.0;\n  float sum = 0.0;\n  for(int i =0; i < PERLIN_ITER; ++i) {\n    f *= 0.5;\n    sum += f * cnoise(p);\n    p *= 2.0;\n  }\n  sum += f * cnoise(p);\n  return sum+0.5;\n}\n*/\n\nfloat noise(vec4 p){\n  return cnoise(p);\n}\n\nfloat noise(vec3 p){\n  return cnoise(p);\n}\n\nfloat noise(vec2 p){\n  return cnoise(p);\n}",d="float hue2rgb(float f1, float f2, float hue) {\n    if (hue < 0.0)\n    hue += 1.0;\n    else if (hue > 1.0)\n    hue -= 1.0;\n    float res;\n    if ((6.0 * hue) < 1.0)\n    res = f1 + (f2 - f1) * 6.0 * hue;\n    else if ((2.0 * hue) < 1.0)\n    res = f2;\n    else if ((3.0 * hue) < 2.0)\n    res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n    else\n    res = f1;\n    return res;\n}\n\nvec3 hsl2rgb(vec3 hsl) {\n    vec3 rgb;\n\n    if (hsl.y == 0.0) {\n        rgb = vec3(hsl.z); // Luminance\n    } else {\n        float f2;\n\n        if (hsl.z < 0.5)\n        f2 = hsl.z * (1.0 + hsl.y);\n        else\n        f2 = hsl.z + hsl.y - hsl.y * hsl.z;\n\n        float f1 = 2.0 * hsl.z - f2;\n\n        rgb.r = hue2rgb(f1, f2, hsl.x + (1.0/3.0));\n        rgb.g = hue2rgb(f1, f2, hsl.x);\n        rgb.b = hue2rgb(f1, f2, hsl.x - (1.0/3.0));\n    }\n    return rgb;\n}\n\nvec3 hsl2rgb(float h, float s, float l) {\n    return hsl2rgb(vec3(h, s, l));\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 hsv2rgb(float h, float s, float l) {\n    return hsv2rgb(vec3(h, s, l));\n}",m="#define PI 3.1415926535897932384626433832795\n// 2D MODES\n#define DRAW_MODE_2D_NORMAL -9\n#define DRAW_MODE_2D_WATER -8\n#define DRAW_MODE_2D_SHIFT -7\n#define DRAW_MODE_2D_RADIAL -6\n#define DRAW_MODE_2D_LENS -5\n#define DRAW_MODE_2D_BLUR -4\n#define DRAW_MODE_2D_MIX -3\n#define DRAW_MODE_2D -2\n// 3D MODES\n#define DRAW_MODE_3D_MASK -1\n#define DRAW_MODE_3D_DEFAULT 0\n#define DRAW_MODE_3D_SKY 1\n#define DRAW_MODE_3D_CYLINDER 2\n#define DRAW_MODE_3D_EDGES 3\n#define DRAW_MODE_3D_NO_EDGES_MASK 4\n#define DRAW_MODE_3D_BILLBOARD 5\n#define DRAW_MODE_3D_TORUS 6\n#define DRAW_MODE_3D_MANDALA 7\n#define DRAW_MODE_3D_CUBE 8\n#define DRAW_MODE_3D_SPHERICAL_GRID 9\n#define DRAW_MODE_3D_HEXA_GRID 10\n#define DRAW_MODE_3D_PYRAMID 11",v=(t("25f0"),t("cfc3"),t("84c3"),t("44b4")),g=t("20e7"),x={TRANSPARENT:g["c"].fromValues(0,0,0,0),WHITE:g["c"].fromValues(1,1,1,1),BLACK:g["c"].fromValues(0,0,0,1),initShaderProgram:function(e,n,t){var o=this.loadShader(e,e.VERTEX_SHADER,n),i=this.loadShader(e,e.FRAGMENT_SHADER,t),r=e.createProgram();return e.attachShader(r,o),e.attachShader(r,i),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(r)),null)},loadShader:function(e,n,t){var o=e.createShader(n);return e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(o)),e.deleteShader(o),null)},createState:function(e,n,t){return{time:0,delta:0,vrInitialized:!1,vrToggle:!1,vrSession:null,vrSpace:null,animation:null,cleanDrawback:e,drawCallback:n,updateCallback:t,vrSupported:!1,map:{},tick:function(e){e*=.001,this.delta=e-this.time,this.time=e},log:""}},loop:function(e,n){var t=this;function o(e){}function i(t){return t.addEventListener("end",o),t.updateRenderState({baseLayer:new XRWebGLLayer(t,e)}),t.requestReferenceSpace("local").then((function(e){n.vrSession=t,console.log(e),n.vrSpace=e,n.animation&&cancelAnimationFrame(n.animation),n.animation=t.requestAnimationFrame(r)})),console.log(t),t}function r(o,a){n.vrToggle&&(n.vrToggle=!1,n.vrInitialized||(n.vrInitialized=!0,new v["a"],navigator.xr&&navigator.xr.isSessionSupported("immersive-vr").then((function(e){n.vrSupported=e,navigator.xr.requestSession("immersive-vr").then(i)}))));var c=null,s=null;if(n.vrInitialized&&a?(s=a.session,n.animation=s.requestAnimationFrame(r),n.vrSpace&&a&&(c=a.getViewerPose(n.vrSpace))):n.animation=requestAnimationFrame(r),n.tick(o),n.updateCallback(e,n),n.vrInitialized&&a){if(c){var l=s?s.renderState.baseLayer:null;for(var u in n.cleanDrawback(e,l.framebuffer,t.TRANSPARENT),c.views){var f=c.views[u],d=l.getViewport(f);d.width>0&&d.height>0&&n.drawCallback(e,d,n,f.transform.inverse.matrix,f.projectionMatrix,l.framebuffer,u+1)}}}else{var m={width:e.canvas.width,height:e.canvas.height,x:0,y:0};m.width&&m.height&&(n.cleanDrawback(e,null,t.TRANSPARENT),n.drawCallback(e,m,n,null,null,null,0))}}n.animation=requestAnimationFrame(r)},getProgramInfo:function(e,n){return{program:n,time:0,attribLocations:{vertexPosition:e.getAttribLocation(n,"aVertexPosition"),vertexNormal:e.getAttribLocation(n,"aVertexNormal"),textureCoordinates:e.getAttribLocation(n,"aTextureCoordinates")},uniformLocations:{projectionMatrix:e.getUniformLocation(n,"uProjectionMatrix"),viewMatrix:e.getUniformLocation(n,"uViewMatrix"),modelMatrix:e.getUniformLocation(n,"uModelMatrix"),orthoMatrix:e.getUniformLocation(n,"uOrthoMatrix"),sampler:[e.getUniformLocation(n,"uSampler[0]"),e.getUniformLocation(n,"uSampler[1]")],enableLight:e.getUniformLocation(n,"uEnableLight"),drawMode:e.getUniformLocation(n,"uDrawMode"),drawVariant:e.getUniformLocation(n,"uDrawVariant"),time:e.getUniformLocation(n,"uTime"),timeShift:e.getUniformLocation(n,"uTimeShift"),animationVelocity:e.getUniformLocation(n,"uAnimationVelocity"),lightDirection:e.getUniformLocation(n,"uLightDirection"),cameraPosition:e.getUniformLocation(n,"uCameraPosition"),canvasSize:e.getUniformLocation(n,"uCanvasSize"),audioSampler:e.getUniformLocation(n,"uAudioSampler"),audioLevel:e.getUniformLocation(n,"uAudioLevel"),effectAmount:e.getUniformLocation(n,"uEffectAmount")}}},createArrayBuffers:function(e,n,t,o,i,r){var a=i.length,c=e.createBuffer(),s=e.createBuffer(),l=e.createBuffer(),u=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW),{ic:a,vb:c,nb:s,tb:u,ib:l,im:r}},createBillboard:function(e){var n=[1,-1,0,1,1,0,-1,1,0,-1,-1,0],t=[0,0,1,0,0,1,0,0,1,0,0,1],o=[1,1,1,0,0,0,0,1],i=[0,1,2,0,2,3];return this.createArrayBuffers(e,n,t,o,i,null)},getCylinderMesh:function(e,n){for(var t=[],o=[],i=[],r=[],a=128,c=16,s=.5,l=0;l<=a;++l)for(var u=0;u<=c;++u){var f=Math.sin(2*Math.PI*u/c),d=l*s,m=Math.cos(2*Math.PI*u/c);t.push(f),t.push(d),t.push(m),o.push(f),o.push(0),o.push(m),i.push(.5*d),i.push(u/c)}for(var v=0;v<a;++v)for(var g=0;g<c;++g)r.push((v+0)*(c+1)+(g+0)),r.push((v+0)*(c+1)+(g+1)),r.push((v+1)*(c+1)+(g+1)),r.push((v+0)*(c+1)+(g+0)),r.push((v+1)*(c+1)+(g+1)),r.push((v+1)*(c+1)+(g+0));return this.createArrayBuffers(e,t,o,i,r,n)},getMesh:function(e,n){var t=n.geometry;if(!t||!t.attributes)return null;var o=t.attributes.position.array,i=t.attributes.normal.array,r=t.attributes.uv.array,a=t.index.array,c=n.material.map?n.material.map.image:null;return o&&i&&r&&a&&o.length&&i.length&&r.length&&a.length||console.error("Model error"),this.createArrayBuffers(e,o,i,r,a,c?this.loadImage(e,c):null)},getModel:function(e,n){var t,o=[],i=Object(s["a"])(n.scene.children);try{for(i.s();!(t=i.n()).done;){var r=t.value,a=this.getMesh(e,r);null!=a&&o.push(a)}}catch(c){i.e(c)}finally{i.f()}return o},enableAttribs:function(e,n){e.enableVertexAttribArray(n.attribLocations.vertexPosition),e.enableVertexAttribArray(n.attribLocations.vertexNormal),e.enableVertexAttribArray(n.attribLocations.textureCoordinates)},disableAttribs:function(e,n){e.disableVertexAttribArray(n.attribLocations.vertexPosition),e.disableVertexAttribArray(n.attribLocations.vertexNormal),e.disableVertexAttribArray(n.attribLocations.textureCoordinates)},bindTexture:function(e,n,t,o){e.uniform1i(n,t),e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,o)},drawMesh:function(e,n,t,o,i,r){e.bindBuffer(e.ARRAY_BUFFER,t.vb),e.vertexAttribPointer(n.attribLocations.vertexPosition,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,t.nb),e.vertexAttribPointer(n.attribLocations.vertexNormal,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,t.tb),e.vertexAttribPointer(n.attribLocations.textureCoordinates,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.ib),i||(i=t.im),i||(i=0),r||(r=i),i&&this.bindTexture(e,n.uniformLocations.sampler[0],0,i),r&&this.bindTexture(e,n.uniformLocations.sampler[1],1,r),e.drawElements(o,t.ic,e.UNSIGNED_SHORT,0)},enableVr:function(e){e.vrInit=!0},isPowerOf2:function(e){return 0===(e&e-1)},generateMipmap:function(e,n){this.isPowerOf2(n.width)&&this.isPowerOf2(n.height)?(e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},initializeTexture:function(e,n){e.bindTexture(e.TEXTURE_2D,n);var t=new Uint8Array([0]);e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,1,1,0,e.LUMINANCE,e.UNSIGNED_BYTE,t)},loadAudio:function(e,n,t,o){e.bindTexture(e.TEXTURE_2D,n);var i=0,r=e.LUMINANCE,a=1,c=0,s=e.LUMINANCE,l=e.UNSIGNED_BYTE;e.texImage2D(e.TEXTURE_2D,i,r,t,a,c,s,l,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)},loadImage:function(e,n){var t=e.createTexture();this.initializeTexture(e,t);var o=0,i=e.RGBA,r=e.RGBA,a=e.UNSIGNED_BYTE;return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,o,i,r,a,n),this.generateMipmap(e,n),t},loadTexture:function(e,n){var t=e.createTexture();this.initializeTexture(e,t);var o=0,i=e.RGBA,r=e.RGBA,a=e.UNSIGNED_BYTE,c=new Image,s=this;return c.onload=function(){e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,o,i,r,a,c),s.generateMipmap(e,c)},c.src=n,t},TEMP_TO:g["b"].create(),TEMP_UP:g["b"].create(),TEMP_RIGHT:g["b"].create(),getBillboardMatrix:function(e,n,t,o){var i=g["b"].subtract(g["b"].set(this.TEMP_TO,0,0,0),t,n),r=g["b"].normalize(i,i),a=g["b"].cross(g["b"].set(this.TEMP_RIGHT,0,0,0),o,r),c=g["b"].cross(g["b"].set(this.TEMP_UP,0,0,0),r,a);return g["a"].set(e,a[0],a[1],a[2],0,c[0],c[1],c[2],0,r[0],r[1],r[2],0,n[0],n[1],n[2],1)},createFramebuffer:function(e,n,t,o){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,o,n,t,0,o,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);var r=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,r),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n,t);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,r);var c=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.FRAMEBUFFER_COMPLETE!==c&&console.error("ERROR",c.toString()),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),{texture:i,render:r,frame:a,width:n,height:t}},deleteFramebuffer:function(e,n){n.frame&&e.deleteFramebuffer(n.frame),n.texture&&e.deleteTexture(n.texture),n.render&&e.deleteRenderbuffer(n.render)},getFramebufferTexture:function(e){return e.getFramebufferAttachmentParameter(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME)},toggleVR:function(e,n){n.vrToggle=!0},copyBuffer:function(e,n,t){e.bindFramebuffer(e.DRAW_FRAMEBUFFER,t.frame),e.bindFramebuffer(e.READ_FRAMEBUFFER,n.frame),e.blitFramebuffer(0,0,n.width,n.height,0,0,t.width,t.height,e.COLOR_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)}},y={initializeArray:function(e){for(var n=0;n<e.length;++n)e[n]=0},myNoise3d:function(e,n,t,o,i){var r=e.simplex3(n/i,t/i,o/i);return.5*(r+1)},myNoise3dx:function(e,n,t,o,i){for(var r=i,a=1,c=0,s=0;s<7;++s)a*=.5,c+=a*this.myNoise3d(e,n,t,o,r),r*=.5;return c+=a*this.myNoise3d(e,n,t,o,r),c},max:function(e){for(var n=0,t=0;t<e.length;++t)n=Math.max(n,e[t]);return n}},h=t("412d"),b=t.n(h),p=t("bd2e"),E=t.n(p),P=t("4971"),T=t.n(P),A=(t("24df"),!1),w=.003,_=-9,M=-8,R=-7,L=-6,F=-4,D=-3,z=-2,S=-1,C=0,N=1,U=2,I=3,O=4,B=5,q=6,V=7,G=8,W=9,k=10,H=11,X={name:"VrMusic",components:{VueSlider:T.a},data:function(){return{canvasWidth:window.innerWidth,canvasHeight:window.innerHeight,state:null,gl:null,source:null,isPlaying:!1,audioContext:null,analyser:null,freqArray:null,dataArray:null,fftSize:512,audioLevel:0,softAudioLevel:0,timeShift:0,hidden:!1,micAmp:1,waterTransition:[80,100],radialTransition:[80,100],rgbTransition:[60,80],blurTransition:[30,60],cubesTransition:[50,70],modelTransition:[40,50],mandalaTransition:[40,60],torusTransition:[40,60],starsTransition:[40,60],cylindersTransition:[40,60],hexagonsTransition:[50,70],pyramidsTransition:[50,70],neuralTransition:[50,70],waterPeriod:16,radialPeriod:16,rgbPeriod:16,blurPeriod:8,cubesPeriod:8,modelPeriod:8,mandalaPeriod:8,torusPeriod:8,starsPeriod:8,cylindersPeriod:8,hexagonsPeriod:8,pyramidsPeriod:8,neuralPeriod:8,mousePitch:0,mouseYaw:0}},methods:{enableVr:function(){x.toggleVR(this.gl,this.state)},enableMic:function(){function e(e){this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize,this.source=this.audioContext.createMediaStreamSource(e),this.source.connect(this.analyser),this.isPlaying=!0}this.audioContext||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e.bind(this)))},hideTable:function(){this.hidden=!0},pickFile:function(){this.$refs.file.click()},enableMusic:function(e){this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize;var n=e.target.files[0];if(n){var t=new FileReader;t.readAsArrayBuffer(n),t.onload=function(e){var n=e.target.result;this.audioContext.decodeAudioData(n,function(e){this.source=this.audioContext.createBufferSource(),this.source.buffer=e,this.source.loop=!0,this.source.start(0),this.source.connect(this.analyser),this.analyser.connect(this.audioContext.destination)}.bind(this))}.bind(this)}},rotateViewBy:function(e,n){this.mouseYaw-=e*w,this.mousePitch-=n*w,this.mousePitch<.5*-Math.PI?this.mousePitch=.5*-Math.PI:this.mousePitch>.5*Math.PI&&(this.mousePitch=.5*Math.PI)},handlePointerMove:function(e){1&e.buttons&&this.rotateViewBy(e.movementX,e.movementY)}},mounted:function(){var e=document.querySelector("#glcanvas"),n=e.getContext("webgl2",{xrCompatible:!0});this.gl=n,e.addEventListener("contextmenu",(function(e){e.preventDefault()})),e.addEventListener("pointermove",this.handlePointerMove),window.addEventListener("resize",function(){this.canvasWidth=window.innerWidth,this.canvasHeight=window.innerHeight,console.log(this)}.bind(this));var t=u.replace("//#PERLIN",f).replace("//#COMMON",m).replace("//#HSL2RGB",d),o=l.replace("//#PERLIN",f).replace("//#COMMON",m).replace("//#HSL2RGB",d),i=x.initShaderProgram(n,o,t);n.useProgram(i);var r=x.getProgramInfo(n,i),a=g["b"].fromValues(-1,-1,-1);g["b"].normalize(a,a);var c=g["a"].ortho(g["a"].create(),-1,1,-1,1,-1,1);n.uniformMatrix4fv(r.uniformLocations.orthoMatrix,!1,c),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA);var v=x.loadTexture(n,"textures/pixel.png"),h=x.loadTexture(n,"textures/pattern.png"),p=x.getCylinderMesh(n,h),P=x.loadTexture(n,"textures/flare.png"),T=x.loadTexture(n,"textures/mandala.png"),w=x.loadTexture(n,"textures/mandala_mask.png"),X=x.loadTexture(n,"textures/hexa_texture.png"),j=x.loadTexture(n,"textures/hexa_mask.png"),Y=x.createBillboard(n),K=n.createTexture();this.freqArray=new Uint8Array(this.fftSize),this.dataArray=new Uint8Array(this.fftSize),y.initializeArray(this.freqArray),y.initializeArray(this.dataArray),x.initializeTexture(n,K),b.a.noise.seed(Math.random());var $=null,J=null,Q=null,Z=null,ee=null,ne=null,te=null,oe=null,ie=new E.a;ie.load("models/ganesha.gltf",(function(e){J=x.getModel(n,e)})),ie.load("models/space.gltf",(function(e){Q=x.getModel(n,e)})),ie.load("models/mandala.gltf",(function(e){$=x.getModel(n,e)})),ie.load("models/torus.gltf",(function(e){Z=x.getModel(n,e)})),ie.load("models/cube.gltf",(function(e){ee=x.getModel(n,e)})),ie.load("models/sphere.gltf",(function(e){ne=x.getModel(n,e)})),ie.load("models/hexa.gltf",(function(e){te=x.getModel(n,e)})),ie.load("models/pyramid.gltf",(function(e){oe=x.getModel(n,e)}));var re=g["b"].create(),ae=g["b"].create(),ce=g["b"].create(),se=g["b"].create(),le=g["b"].create(),ue=g["b"].create(),fe=g["a"].create(),de=g["a"].create(),me=g["a"].create(),ve=g["b"].create(),ge=g["b"].fromValues(0,0,-6);function xe(e,n,t){return e<n?n:e>t?t:e}function ye(e,n,t){return e<n?0:e>=t?1:xe((e-n)/(t-n),0,1)}function he(e,n){if(this.audioContext&&this.analyser){this.analyser.getByteTimeDomainData(this.dataArray);for(var t=0;t<this.dataArray.length;++t)this.dataArray[t]*=this.micAmp;x.loadAudio(e,K,this.fftSize,this.dataArray),x.bindTexture(e,r.uniformLocations.audioSampler,2,K),this.audioLevel=2*(y.max(this.dataArray)/255-.5);var o=.25,i=xe(n.delta/o,0,1);this.softAudioLevel=(1-i)*this.softAudioLevel+i*this.audioLevel}}function be(e,n,t){e.bindFramebuffer(e.FRAMEBUFFER,n),e.clearColor(t[0],t[1],t[2],t[3]),e.enable(e.DEPTH_TEST),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function pe(e,n,t,o,i,a){return o&&o.width===n&&o.height===t||(null!=o&&x.deleteFramebuffer(e,o),o=x.createFramebuffer(e,n,t,a)),e.bindFramebuffer(e.FRAMEBUFFER,o.frame),e.clearColor(i[0],i[1],i[2],i[3]),e.enable(e.DEPTH_TEST),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),x.bindTexture(e,r.uniformLocations.sampler[0],0,v),x.bindTexture(e,r.uniformLocations.sampler[1],1,v),x.bindTexture(e,r.uniformLocations.audioSampler,2,K),o}function Ee(e,n,t,o,i,c,l){e.viewport(0,0,n.width,n.height),x.enableAttribs(e,r);var u=t.map||{},f=pe(e,n.width,n.height,u.drawFrameBuffer,x.TRANSPARENT,e.RGBA),d=pe(e,n.width,n.height,u.maskFrameBuffer,x.BLACK,e.RGBA),m=pe(e,n.width,n.height,u.normalMaskFrameBuffer,x.BLACK,e.RGBA),v=pe(e,n.width,n.height,u.alphaFrameBuffer,x.TRANSPARENT,e.RGBA),h=pe(e,n.width,n.height,u.temporaryBuffer,x.TRANSPARENT,e.RGBA);t.map={drawFrameBuffer:f,maskFrameBuffer:d,alphaFrameBuffer:v,temporaryBuffer:h,normalMaskFrameBuffer:m},this.timeShift+=t.delta*this.softAudioLevel,e.uniform1f(r.uniformLocations.time,t.time),e.uniform1f(r.uniformLocations.timeShift,this.timeShift),e.uniform1f(r.uniformLocations.audioLevel,this.audioLevel),e.uniform3fv(r.uniformLocations.lightDirection,a),e.uniform2f(r.uniformLocations.canvasSize,n.width,n.height);var E=.5,ie=ye(y.myNoise3dx(b.a.noise,t.time,0,0,this.blurPeriod),this.blurTransition[0]/100,this.blurTransition[1]/100),xe=ye(y.myNoise3dx(b.a.noise,0,t.time,0,this.cylindersPeriod),this.cylindersTransition[0]/100,this.cylindersTransition[1]/100),he=ye(y.myNoise3dx(b.a.noise,0,0,t.time,this.cubesPeriod),this.cubesTransition[0]/100,this.cubesTransition[1]/100),be=ye(y.myNoise3dx(b.a.noise,t.time,t.time,0,this.torusPeriod),this.torusTransition[0]/100,this.torusTransition[1]/100),Ee=ye(y.myNoise3dx(b.a.noise,t.time,0,t.time,this.mandalaPeriod),this.mandalaTransition[0]/100,this.mandalaTransition[1]/100),Pe=ye(y.myNoise3dx(b.a.noise,0,t.time,t.time,this.starsPeriod),this.starsTransition[0]/100,this.starsTransition[1]/100),Te=ye(y.myNoise3dx(b.a.noise,t.time,t.time,t.time,this.modelPeriod),this.modelTransition[0]/100,this.modelTransition[1]/100),Ae=ye(y.myNoise3dx(b.a.noise,t.time+1024,t.time,t.time,this.rgbPeriod),this.rgbTransition[0]/100,this.rgbTransition[1]/100),we=ye(y.myNoise3dx(b.a.noise,t.time,t.time+1024,t.time,this.waterPeriod),this.waterTransition[0]/100,this.waterTransition[1]/100),_e=ye(y.myNoise3dx(b.a.noise,t.time,t.time,t.time+1024,this.radialPeriod),this.radialTransition[0]/100,this.radialTransition[1]/100),Me=ye(y.myNoise3dx(b.a.noise,t.time+1024,0,0,this.neuralPeriod),this.neuralTransition[0]/100,this.neuralTransition[1]/100),Re=ye(y.myNoise3dx(b.a.noise,0,t.time+1024,0,this.hexagonsPeriod),this.hexagonsTransition[0]/100,this.hexagonsTransition[1]/100),Le=ye(y.myNoise3dx(b.a.noise,0,0,t.time+1024,this.pyramidsPeriod),this.pyramidsTransition[0]/100,this.pyramidsTransition[1]/100);A&&(Ae=0,we=0,_e=0,Re=1);var Fe=0;if(null==o){o=g["a"].create();var De=g["b"].set(ce,0,0,-1),ze=g["b"].set(re,0,1,0),Se=g["b"].set(ae,0,0,0);g["a"].lookAt(o,Se,De,ze),g["a"].rotateX(o,o,this.mousePitch),g["a"].rotateY(o,o,this.mouseYaw)}null==i&&(i=g["a"].identity(me),g["a"].perspective(i,90*Math.PI/180,e.canvas.clientWidth/e.canvas.clientHeight,.1,1e3)),e.uniformMatrix4fv(r.uniformLocations.viewMatrix,!1,o),e.uniformMatrix4fv(r.uniformLocations.projectionMatrix,!1,i);var Ce=g["a"].invert(fe,o);if(g["b"].set(ve,Ce[12],Ce[13],Ce[14]),e.uniform3fv(r.uniformLocations.cameraPosition,ve),Q){e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,1);var Ne=g["a"].identity(de);g["a"].scale(Ne,Ne,g["b"].set(le,400,400,400)),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,N),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Ne),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var Ue,Ie=Object(s["a"])(Q);try{for(Ie.s();!(Ue=Ie.n()).done;){var Oe=Ue.value;x.drawMesh(e,r,Oe,e.TRIANGLES)}}catch(Mt){Ie.e(Mt)}finally{Ie.f()}}if(Z&&be){e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,be);var Be=g["b"].set(se,0,0,0),qe=g["b"].set(le,32,8,32),Ve=g["a"].identity(de);g["b"].add(Be,Be,ge),g["a"].translate(Ve,Ve,Be),g["a"].scale(Ve,Ve,qe),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Ve),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,q),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE);var Ge,We=Object(s["a"])(Z);try{for(We.s();!(Ge=We.n()).done;){var ke=Ge.value;x.drawMesh(e,r,ke,e.TRIANGLES)}}catch(Mt){We.e(Mt)}finally{We.f()}}if(ee&&he){e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,he),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,G),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);for(var He=1,Xe=64,je=-He;je<=He;++je)for(var Ye=-He;Ye<=He;++Ye)for(var Ke=-He;Ke<=He;++Ke)if(Math.abs(je)===He||Math.abs(Ye)===He||Math.abs(Ke)===He){var $e=this.softAudioLevel,Je=g["b"].set(se,je,Ye,Ke),Qe=g["b"].set(ue,0,0,0),Ze=g["b"].set(le,1,1,1),en=g["a"].identity(de);g["b"].normalize(Qe,Je),g["b"].scale(Je,Qe,Xe*(1-$e)),g["b"].add(Je,Je,ge),g["a"].translate(en,en,Je),g["a"].scale(en,en,Ze),g["a"].rotate(en,en,$e*Math.PI*2,Qe),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,en);var nn,tn=Object(s["a"])(ee);try{for(tn.s();!(nn=tn.n()).done;){var on=nn.value;x.drawMesh(e,r,on,e.TRIANGLES)}}catch(Mt){tn.e(Mt)}finally{tn.f()}}}if(oe&&Le){e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,Le),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,H);var rn=32;Fe=0;for(var an=Math.PI/3;an<2*Math.PI-.001;an+=Math.PI/3){var cn=g["b"].set(se,-rn*Math.sin(an),0,-rn*Math.cos(an)),sn=g["a"].identity(de),ln=g["b"].set(le,4,4,4);g["b"].add(cn,cn,ge),g["a"].translate(sn,sn,cn),g["a"].scale(sn,sn,ln),g["a"].rotateY(sn,sn,-this.timeShift),e.uniform1f(r.uniformLocations.drawVariant,4*++Fe),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,sn);var un,fn=Object(s["a"])(oe);try{for(fn.s();!(un=fn.n()).done;){var dn=un.value;x.drawMesh(e,r,dn,e.TRIANGLES)}}catch(Mt){fn.e(Mt)}finally{fn.f()}}}if(ne&&Me){e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,Me),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,W),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var mn=g["b"].set(le,4,4,4),vn=g["a"].identity(de);g["a"].scale(vn,vn,mn),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,vn);var gn,xn=Object(s["a"])(ne);try{for(xn.s();!(gn=xn.n()).done;){var yn=gn.value;x.drawMesh(e,r,yn,e.TRIANGLES)}}catch(Mt){xn.e(Mt)}finally{xn.f()}}if(te&&Re){e.uniform1f(r.uniformLocations.effectAmount,Re),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,k),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var hn=g["b"].set(le,2,2,2),bn=g["a"].identity(de);g["a"].scale(bn,bn,hn),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,bn),e.bindFramebuffer(e.FRAMEBUFFER,m.frame);var pn,En=Object(s["a"])(te);try{for(En.s();!(pn=En.n()).done;){var Pn=pn.value;x.drawMesh(e,r,Pn,e.TRIANGLES,j)}}catch(Mt){En.e(Mt)}finally{En.f()}}if(xe){e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,xe),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1f(r.uniformLocations.animationVelocity,2),e.uniform1i(r.uniformLocations.drawMode,U);var Tn=20;Fe=0;for(var An=Math.PI/3;An<2*Math.PI-.001;An+=2*Math.PI/3){var wn=g["b"].set(se,-Tn*Math.sin(An),-128,-Tn*Math.cos(An)),_n=g["a"].identity(de),Mn=g["b"].set(le,4,4,4);g["b"].add(wn,wn,ge),g["a"].translate(_n,_n,wn),g["a"].scale(_n,_n,Mn),e.uniform1f(r.uniformLocations.drawVariant,4*++Fe),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,_n),x.drawMesh(e,r,p,e.TRIANGLES)}}if(Pe){e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,Pe);var Rn=g["b"].set(re,0,1,0);e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,B),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),Fe=0;for(var Ln=0;Ln<2*Math.PI;Ln+=Math.PI/8){var Fn=24,Dn=g["b"].set(se,Fn*Math.cos(Ln),24,Fn*Math.sin(Ln)),zn=g["b"].set(le,2,2,2),Sn=g["a"].identity(de);g["b"].add(Dn,Dn,ge),Sn=x.getBillboardMatrix(Sn,Dn,ve,Rn),g["a"].scale(Sn,Sn,zn),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Sn),e.uniform1f(r.uniformLocations.drawVariant,32*++Fe),x.drawMesh(e,r,Y,e.TRIANGLES,P)}}if($&&ie){e.bindFramebuffer(e.FRAMEBUFFER,d.frame),e.uniform1f(r.uniformLocations.effectAmount,1);var Cn=g["a"].identity(de),Nn=g["b"].set(se,0,-2.2,0),Un=g["b"].set(le,8,8,8);g["b"].add(Nn,Nn,ge),g["a"].translate(Cn,Cn,Nn),g["a"].scale(Cn,Cn,Un),g["a"].rotateY(Cn,Cn,-this.timeShift*E),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,S),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Cn),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var In,On=Object(s["a"])($);try{for(On.s();!(In=On.n()).done;){var Bn=In.value;x.drawMesh(e,r,Bn,e.TRIANGLES,w)}}catch(Mt){On.e(Mt)}finally{On.f()}}if(J&&ie){e.bindFramebuffer(e.FRAMEBUFFER,d.frame),e.uniform1f(r.uniformLocations.effectAmount,1);var qn=g["a"].identity(de),Vn=g["b"].set(se,0,0,0);g["b"].add(Vn,Vn,ge),g["a"].translate(qn,qn,Vn),g["a"].rotateY(qn,qn,Math.PI/2-this.timeShift*E),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(r.uniformLocations.enableLight,0),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,qn),e.uniform1i(r.uniformLocations.drawMode,O);var Gn,Wn=Object(s["a"])(J);try{for(Wn.s();!(Gn=Wn.n()).done;){var kn=Gn.value;x.drawMesh(e,r,kn,e.TRIANGLES)}}catch(Mt){Wn.e(Mt)}finally{Wn.f()}}if($&&Ee){var Hn=g["b"].set(se,0,-2.2,0),Xn=g["a"].identity(de),jn=g["b"].set(le,8,8,8);g["b"].add(Hn,Hn,ge),g["a"].translate(Xn,Xn,Hn),g["a"].scale(Xn,Xn,jn),g["a"].rotateY(Xn,Xn,-this.timeShift*E),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Xn),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,Ee),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,V);var Yn,Kn=Object(s["a"])($);try{for(Kn.s();!(Yn=Kn.n()).done;){var $n=Yn.value;x.drawMesh(e,r,$n,e.TRIANGLES,T)}}catch(Mt){Kn.e(Mt)}finally{Kn.f()}}if(ie){e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var Jn=g["a"].identity(de);e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Jn),e.uniform1i(r.uniformLocations.enableLight,0),e.bindFramebuffer(e.FRAMEBUFFER,h.frame),e.uniform1f(r.uniformLocations.effectAmount,1),e.uniform1i(r.uniformLocations.drawMode,z),x.drawMesh(e,r,Y,e.TRIANGLES,f.texture),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,ie),e.uniform1i(r.uniformLocations.drawMode,F),x.drawMesh(e,r,Y,e.TRIANGLES,h.texture,d.texture)}if(J){var Qn=g["b"].set(se,0,0,0);g["b"].add(Qn,Qn,ge);var Zn=g["a"].identity(de);g["a"].translate(Zn,Zn,Qn),g["a"].rotateY(Zn,Zn,Math.PI/2-this.timeShift*E),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Zn),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(r.uniformLocations.enableLight,1),e.bindFramebuffer(e.FRAMEBUFFER,v.frame),e.uniform1f(r.uniformLocations.effectAmount,1),e.uniform1i(r.uniformLocations.drawMode,C);var et,nt=Object(s["a"])(J);try{for(nt.s();!(et=nt.n()).done;){var tt=et.value;x.drawMesh(e,r,tt,e.TRIANGLES)}}catch(Mt){nt.e(Mt)}finally{nt.f()}}if(Te){var ot=g["a"].identity(de);e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,ot),e.uniform1i(r.uniformLocations.enableLight,0),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,Te),e.uniform1i(r.uniformLocations.drawMode,D),x.drawMesh(e,r,Y,e.TRIANGLES,v.texture)}if(J){var it=g["b"].set(se,0,0,0);g["b"].add(it,it,ge);var rt=g["a"].identity(de);g["a"].translate(rt,rt,it),g["a"].rotateY(rt,rt,Math.PI/2-this.timeShift*E),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,rt),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(r.uniformLocations.enableLight,1),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,1),e.uniform1i(r.uniformLocations.drawMode,I);var at,ct=Object(s["a"])(J);try{for(ct.s();!(at=ct.n()).done;){var st=at.value;x.drawMesh(e,r,st,e.TRIANGLES)}}catch(Mt){ct.e(Mt)}finally{ct.f()}}if(Re){e.uniform1f(r.uniformLocations.effectAmount,1),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var lt=g["a"].identity(de);e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,lt),e.uniform1i(r.uniformLocations.enableLight,0),x.copyBuffer(e,f,h),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,1),e.uniform1i(r.uniformLocations.drawMode,_),x.drawMesh(e,r,Y,e.TRIANGLES,h.texture,m.texture)}if(te&&Re){e.uniform1f(r.uniformLocations.effectAmount,Re),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,k),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var ut=g["b"].set(le,2,2,2),ft=g["a"].identity(de);g["a"].scale(ft,ft,ut),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,ft),e.bindFramebuffer(e.FRAMEBUFFER,f.frame);var dt,mt=Object(s["a"])(te);try{for(mt.s();!(dt=mt.n()).done;){var vt=dt.value;x.drawMesh(e,r,vt,e.TRIANGLES,X)}}catch(Mt){mt.e(Mt)}finally{mt.f()}}if(_e){e.uniform1f(r.uniformLocations.effectAmount,1),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var gt=g["a"].identity(de);e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,gt),e.uniform1i(r.uniformLocations.enableLight,0),x.copyBuffer(e,f,h),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,_e),e.uniform1i(r.uniformLocations.drawMode,L),x.drawMesh(e,r,Y,e.TRIANGLES,h.texture)}if(we){e.uniform1f(r.uniformLocations.effectAmount,1),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var xt=g["a"].identity(de);e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,xt),e.uniform1i(r.uniformLocations.enableLight,0),x.copyBuffer(e,f,h),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,we),e.uniform1i(r.uniformLocations.drawMode,M),x.drawMesh(e,r,Y,e.TRIANGLES,h.texture)}if(Ae){e.uniform1f(r.uniformLocations.effectAmount,1),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var yt=g["a"].identity(de);e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,yt),e.uniform1i(r.uniformLocations.enableLight,0),x.copyBuffer(e,f,h),e.bindFramebuffer(e.FRAMEBUFFER,f.frame),e.uniform1f(r.uniformLocations.effectAmount,Ae),e.uniform1i(r.uniformLocations.drawMode,R),x.drawMesh(e,r,Y,e.TRIANGLES,h.texture)}e.viewport(n.x,n.y,n.width,n.height);var ht=g["a"].identity(de);if(e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,ht),e.uniform1i(r.uniformLocations.enableLight,0),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.bindFramebuffer(e.FRAMEBUFFER,c),e.uniform1f(r.uniformLocations.effectAmount,1),e.uniform1i(r.uniformLocations.drawMode,z),x.drawMesh(e,r,Y,e.TRIANGLES,f.texture),A&&Y){e.bindFramebuffer(e.FRAMEBUFFER,c),e.uniform1f(r.uniformLocations.effectAmount,1),e.uniform1i(r.uniformLocations.enableLight,0),e.uniform1i(r.uniformLocations.drawMode,z),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var bt=[K,d.texture,v.texture,m.texture],pt=.1,Et=g["a"].identity(de),Pt=g["b"].set(se,-1-pt,1-pt,0),Tt=g["b"].set(le,pt,pt,1);g["a"].translate(Et,Et,Pt),g["a"].scale(Et,Et,Tt),Pt=g["b"].set(se,2,0,0);for(var At=0,wt=bt;At<wt.length;At++){var _t=wt[At];g["a"].translate(Et,Et,Pt),e.uniformMatrix4fv(r.uniformLocations.modelMatrix,!1,Et),x.drawMesh(e,r,Y,e.TRIANGLES,_t)}}}this.state=x.createState(be.bind(this),Ee.bind(this),he.bind(this)),x.loop(this.gl,this.state)}},j=X,Y=(t("b444"),t("3aee"),t("2877")),K=Object(Y["a"])(j,a,c,!1,null,"066ca844",null),$=K.exports,J={name:"App",components:{WebGl:$}},Q=J,Z=(t("034f"),Object(Y["a"])(Q,i,r,!1,null,null,null)),ee=Z.exports;o["default"].config.productionTip=!1,new o["default"]({render:function(e){return e(ee)}}).$mount("#app")},"5f8c":function(e,n,t){},"85ec":function(e,n,t){},b444:function(e,n,t){"use strict";var o=t("d8f9"),i=t.n(o);i.a},d8f9:function(e,n,t){}});
//# sourceMappingURL=app.de021809.js.map