(function(e){function n(n){for(var t,i,c=n[0],l=n[1],u=n[2],s=0,v=[];s<c.length;s++)i=c[s],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&v.push(o[i][0]),o[i]=0;for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t]);f&&f(n);while(v.length)v.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],t=!0,c=1;c<r.length;c++){var l=r[c];0!==o[l]&&(t=!1)}t&&(a.splice(n--,1),e=i(i.s=r[0]))}return e}var t={},o={app:0},a=[];function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,n,r){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)i.d(r,t,function(n){return e[n]}.bind(null,t));return r},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var f=l;a.push([0,"chunk-vendors"]),r()})({0:function(e,n,r){e.exports=r("56d7")},4631:function(e,n,r){"use strict";var t=r("f212"),o=r.n(t);o.a},"56d7":function(e,n,r){"use strict";r.r(n);r("e260"),r("e6cf"),r("cca6"),r("a79d");var t=r("2b0e"),o=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{attrs:{id:"app"}},[r("WebGl")],1)},a=[],i=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("canvas",{attrs:{width:e.canvasWidth,height:e.canvasHeight,id:"glcanvas"}}),r("br"),r("button",{on:{click:e.enableVr}},[e._v("VR")])])},c=[],l=(r("ac1f"),r("5319"),r("b85c")),u="#version 300 es\nprecision highp float;\nprecision highp int;\n\nin vec4 aVertexPosition;\nin vec4 aVertexNormal;\nin vec2 aTextureCoordinates;\n\nuniform int uDrawMode;\nuniform float uDrawVariant;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uModelMatrix;\nuniform vec3 uLightDirection;\nuniform float uTime;\n\nout vec4 vColor;\nout vec3 vNormal;\nout vec3 vLightDirection;\nout vec2 vTextureCoordinates;\nout vec4 vPosition;\n\n//#PERLIN\n\nvoid main(void) {\n    vPosition = uModelMatrix*aVertexPosition;\n\n    // temporary variables\n    vec4 tNormal = uModelMatrix*aVertexNormal;\n    vec2 tTextureCoordinates = aTextureCoordinates;\n\n\n    if (uDrawMode == 2) {\n        float cx = aTextureCoordinates.x;\n        float cy = cos(aTextureCoordinates.y*PI);\n        float time = uTime;\n\n        // COLOR\n        float colorVelocity = 0.5;// color changes quicker\n        float colorFrequency = 0.2;// color is wider\n        vec4 noiseColor = vec4(\n            noise(vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n            noise(vec4(uDrawVariant, cx*colorFrequency, cy, colorVelocity*time)),\n            noise(vec4(cx*colorFrequency, cy, uDrawVariant, colorVelocity*time)),\n            0.0\n        );\n        vColor = noiseColor;\n\n        // TEXTURE\n        float textureNoiseVelocity = 0.2;\n        float textureNoiseFrequency = 0.5;\n        vec2 noiseTexture = vec2(\n            noise(vec4(cx, cy, time*textureNoiseVelocity, uDrawVariant)*textureNoiseFrequency),\n            noise(vec4(uDrawVariant, cx, cy, time*textureNoiseVelocity)*textureNoiseFrequency)\n        );\n\n        vec2 textureVelocity = vec2(-1.0, 0.5);\n        float textureRotation = 0.5;\n        float textureWaveSize = 0.4;\n\n        vec2 dTextureCoordinates = uTime*textureVelocity + noiseTexture*textureWaveSize;\n        dTextureCoordinates.y=textureRotation*sin(dTextureCoordinates.y);\n        tTextureCoordinates += dTextureCoordinates;\n\n        // POSITION\n        float displacementAmplitude = 16.0;\n        float displacementFrequency = 0.05;\n        float displacementVelocity = 0.05;\n        vec4 displacement = displacementAmplitude * vec4(\n            noise(vec4(uDrawVariant, vPosition.y*displacementFrequency, 0.0, uTime*displacementVelocity)),\n            0.0,\n            noise(vec4(uDrawVariant, 0.0, vPosition.y*displacementFrequency, uTime*displacementVelocity)),\n            0.0\n        );\n        vPosition += displacement;\n    } else if (uDrawMode == 3) {\n        float cx = aTextureCoordinates.x;\n        float cy = cos(aTextureCoordinates.y*PI);\n        float time = uTime;\n\n        // COLOR\n        float colorVelocity = 0.2;// color changes quicker\n        float colorFrequency = 0.1;// color is wider\n        vec4 noiseColor = vec4(\n            noise(1.0*vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n            noise(1.0*vec4(uDrawVariant, cx*colorFrequency, cy, colorVelocity*time)),\n            noise(1.0*vec4(cx*colorFrequency, cy, uDrawVariant, colorVelocity*time)),\n        0.0\n        );\n        vColor = noiseColor;\n    } else if (uDrawMode == 4) {\n        float cx = 0.0;\n        float cy = cos(aTextureCoordinates.y*PI);\n        float time = uTime;\n\n        // COLOR\n        float colorVelocity = 0.5;// color changes quicker\n        float colorFrequency = 1.0;// color is wider\n        vec4 noiseColor = vec4(\n            noise(1.0*vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n            noise(1.0*vec4(uDrawVariant, cx*colorFrequency, cy, colorVelocity*time)),\n            noise(1.0*vec4(cx*colorFrequency, cy, uDrawVariant, colorVelocity*time)),\n            0.0\n        );\n        vColor = noiseColor;\n    }else if (uDrawMode == 5) {\n        float cx = aTextureCoordinates.x;\n        float cy = aTextureCoordinates.y;\n        float time = uTime;\n\n        // COLOR\n        float colorVelocity = 0.2;// color changes quicker\n        float colorFrequency = 0.1;// color is wider\n        vec4 noiseColor = vec4(\n            noise(vec4(cx*colorFrequency, cy, time*colorVelocity, uDrawVariant)),\n            noise(vec4(uDrawVariant, cx*colorFrequency, cy, colorVelocity*time)),\n            noise(vec4(cx*colorFrequency, cy, uDrawVariant, colorVelocity*time)),\n        0.0\n        );\n        vColor = noiseColor;\n    }\n\n    mat4 mv = uViewMatrix*uModelMatrix;\n    mat3 vNormalMatrix = transpose(inverse(mat3(mv)));\n\n    mat4 viewProjectionMatrix = uProjectionMatrix * uViewMatrix;\n\n    gl_Position = viewProjectionMatrix * vPosition;\n    vNormal = normalize(vNormalMatrix * aVertexNormal.xyz);\n    vTextureCoordinates = tTextureCoordinates;\n\n}",f="#version 300 es\nprecision highp float;\nprecision highp int;\n\nuniform int uDrawMode;\nuniform sampler2D uSampler;\nuniform bool uEnableLight;\nuniform float uTime;\nuniform vec3 uLightDirection;\nuniform vec3 uCameraPosition;\n\nin vec3 vNormal;\nin vec2 vTextureCoordinates;\nin vec4 vColor;\nin vec4 vPosition;\n\nout vec4 fragColor;\n\n//#PERLIN\n\nvoid main(void) {\n  vec4 color = vec4(1.0, 1.0, 1.0, 1.0);\n  vec3 normal = normalize(vNormal);\n\n  if(uDrawMode == 0 || uDrawMode == 4 || uDrawMode == 5) {\n    color = texture(uSampler, vTextureCoordinates);\n  } else if(uDrawMode == 1){\n    float n = noise(vec4(vTextureCoordinates, 0.0, uTime*0.1));\n    vec2 p = 2.0*vTextureCoordinates - vec2(1.0, 1.0);\n    float pd = clamp(length(p), 0.0, 1.0);\n    float pr = 1.0 - pd*pd*pd;\n\n    float pc = clamp(pr*n+pr*0.25, 0.0, 1.0);\n    color = vec4(1.0, pc*2.0, 0.0,pc);\n  } else if(uDrawMode == 2) {\n    vec4 c = texture(uSampler, vTextureCoordinates);\n    color = clamp(c+vec4(vColor.xyz, 0.0), 0.0, 1.0);\n  }\n\n  if(uEnableLight) {\n    float dotFactor = dot(normal, -uLightDirection);\n    fragColor = color*vec4(dotFactor,dotFactor,dotFactor,1.0);\n  } else {\n    fragColor = color;\n  }\n\n  if(uDrawMode == 3) {\n\n    vec3 vertexToCam = normalize(vPosition.xyz-uCameraPosition);\n    float edgeDot = abs(dot(vertexToCam, normal));\n    if(edgeDot < 0.2) {\n      float minColor = 0.5;\n      vec3 c = vColor.xyz*8.0 + minColor;\n\n      fragColor.xyz = clamp(c, minColor, 1.0);\n      fragColor.w = 1.0;\n    } else {\n      float l = 1.0-length(fragColor.xyz);\n      fragColor.w = (1.0 - l*l*l)*0.2;\n    }\n  }\n  if (uDrawMode == 4) {\n    float gradient = 150.0;\n    fragColor.xyz += vColor.xyz*clamp(1.0 - abs(vPosition.y)/gradient, 0.0, 0.5);\n  }\n\n  if (uDrawMode == 5) {\n    fragColor.xyz += vColor.xyz;\n   // fragColor.w = 1.0;\n  }\n}",s="//\tClassic Perlin 3D Noise\n//\tby Stefan Gustavson\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec4 fade(vec4 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n#define PI 3.1415926535897932384626433832795\n\n\n\nfloat cnoise(vec4 P){\n  vec4 Pi0 = floor(P); // Integer part for indexing\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n  vec4 ixy00 = permute(ixy0 + iw0);\n  vec4 ixy01 = permute(ixy0 + iw1);\n  vec4 ixy10 = permute(ixy1 + iw0);\n  vec4 ixy11 = permute(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 / 7.0;\n  vec4 gy00 = floor(gx00) / 7.0;\n  vec4 gz00 = floor(gy00) / 6.0;\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 / 7.0;\n  vec4 gy01 = floor(gx01) / 7.0;\n  vec4 gz01 = floor(gy01) / 6.0;\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 / 7.0;\n  vec4 gy10 = floor(gx10) / 7.0;\n  vec4 gz10 = floor(gy10) / 6.0;\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 / 7.0;\n  vec4 gy11 = floor(gx11) / 7.0;\n  vec4 gz11 = floor(gy11) / 6.0;\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n\nfloat noise(vec4 p){\n    return  cnoise(p)\n            //+0.5*cnoise(p)\n            //+0.25*cnoise(p*2.0)\n           // +0.125*cnoise(p*4.0)\n           // +0.0625*cnoise(p*8.0)\n            //+0.03125*cnoise(p*16.0)\n            //+0.015625*cnoise(p*32.0)\n            //+0.0078125*cnoise(p*64.0)\n            ;\n}",v=(r("d81d"),r("d3b7"),r("cfc3"),r("5cc6"),r("84c3"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("44b4")),g=r("20e7"),d={initShaderProgram:function(e,n,r){var t=this.loadShader(e,e.VERTEX_SHADER,n),o=this.loadShader(e,e.FRAGMENT_SHADER,r),a=e.createProgram();return e.attachShader(a,t),e.attachShader(a,o),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(a)),null)},loadShader:function(e,n,r){var t=e.createShader(n);return e.shaderSource(t,r),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)?t:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(t)),e.deleteShader(t),null)},createState:function(e,n,r){return{time:0,delta:0,vrInitialized:!1,vrSession:null,vrSpace:null,animation:null,cleanDrawback:e,drawCallback:n,updateCallback:r,vrSupported:!1,tick:function(e){e*=.001,this.delta=e-this.time,this.time=e},log:""}},loopVr:function(e,n){function r(t,o){var a=o.session;n.vrInitialized&&(n.animation=a.requestAnimationFrame(r));var i=null;if(n.vrSpace&&o&&(i=o.getViewerPose(n.vrSpace)),n.tick(t),n.cleanDrawback(e,n),n.updateCallback(e,n),i){var c=a?a.renderState.baseLayer:null;e.bindFramebuffer(e.FRAMEBUFFER,c.framebuffer);var u,f=Object(l["a"])(i.views);try{for(f.s();!(u=f.n()).done;){var s=u.value,v=c.getViewport(s);e.viewport(v.x,v.y,v.width,v.height),n.drawCallback(e,n,s.transform.inverse.matrix,s.projectionMatrix),n.log=JSON.stringify(s.transform.matrix)+":"+t}}catch(g){f.e(g)}finally{f.f()}}}function t(e){}function o(o){return o.addEventListener("end",t),o.updateRenderState({baseLayer:new XRWebGLLayer(o,e)}),o.requestReferenceSpace("local").then((function(e){n.vrSession=o,console.log(e),n.vrSpace=e,n.animation=o.requestAnimationFrame(r)})),console.log(o),o}n.vrInitialized||(n.vrInitialized=!0,new v["a"],navigator.xr&&navigator.xr.isSessionSupported("immersive-vr").then((function(e){n.vrSupported=e,navigator.xr.requestSession("immersive-vr").then(o)})))},loop:function(e,n){function r(t){n.vrInitialized||(n.animation=requestAnimationFrame(r)),n.tick(t),n.cleanDrawback(e,n),n.updateCallback(e,n),e.viewport(0,0,e.canvas.width,e.canvas.height),n.drawCallback(e,n,null,null)}n.animation=requestAnimationFrame(r)},getProgramInfo:function(e,n){return{program:n,time:0,attribLocations:{vertexPosition:e.getAttribLocation(n,"aVertexPosition"),vertexNormal:e.getAttribLocation(n,"aVertexNormal"),textureCoordinates:e.getAttribLocation(n,"aTextureCoordinates")},uniformLocations:{projectionMatrix:e.getUniformLocation(n,"uProjectionMatrix"),viewMatrix:e.getUniformLocation(n,"uViewMatrix"),modelMatrix:e.getUniformLocation(n,"uModelMatrix"),uSampler:e.getUniformLocation(n,"uSampler"),enableLight:e.getUniformLocation(n,"uEnableLight"),drawMode:e.getUniformLocation(n,"uDrawMode"),drawVariant:e.getUniformLocation(n,"uDrawVariant"),time:e.getUniformLocation(n,"uTime"),lightDirection:e.getUniformLocation(n,"uLightDirection"),cameraPosition:e.getUniformLocation(n,"uCameraPosition")}}},getCylinderMesh:function(e,n){for(var r=[],t=[],o=[],a=[],i=0,c=128,l=16,u=.5,f=0;f<=c;++f)for(var s=0;s<=l;++s){var v=Math.sin(2*Math.PI*s/l),g=f*u,d=Math.cos(2*Math.PI*s/l);r.push(v),r.push(g),r.push(d),t.push(v),t.push(0),t.push(d),o.push(g),o.push(2*s/l)}for(var m=0;m<c;++m)for(var x=0;x<l;++x)a.push((m+0)*(l+1)+(x+0)),a.push((m+0)*(l+1)+(x+1)),a.push((m+1)*(l+1)+(x+1)),a.push((m+0)*(l+1)+(x+0)),a.push((m+1)*(l+1)+(x+1)),a.push((m+1)*(l+1)+(x+0));i=a.length,console.log("*",n);var y=e.createBuffer(),w=e.createBuffer(),p=e.createBuffer(),h=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,y),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,w),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,p),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),e.STATIC_DRAW),{ic:i,vb:y,nb:w,tb:h,ib:p,im:n}},getMesh:function(e,n){var r=n.geometry;if(!r||!r.attributes)return null;var t=r.attributes.position.array,o=r.attributes.normal.array,a=r.attributes.uv.array,i=r.index.array,c=i.length,l=n.material.map.image,u=e.createBuffer(),f=e.createBuffer(),s=e.createBuffer(),v=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,v),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW),{ic:c,vb:u,nb:f,tb:v,ib:s,im:this.loadImage(e,l)}},drawMesh:function(e,n,r,t){e.bindBuffer(e.ARRAY_BUFFER,r.vb),e.vertexAttribPointer(n.attribLocations.vertexPosition,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n.attribLocations.vertexPosition),e.bindBuffer(e.ARRAY_BUFFER,r.nb),e.vertexAttribPointer(n.attribLocations.vertexNormal,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n.attribLocations.vertexNormal),e.bindBuffer(e.ARRAY_BUFFER,r.tb),e.vertexAttribPointer(n.attribLocations.textureCoordinates,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n.attribLocations.textureCoordinates),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.ib),t||(t=r.im),t&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(n.uniformLocations.uSampler,0)),e.drawElements(e.TRIANGLES,r.ic,e.UNSIGNED_SHORT,0)},enableVr:function(e){e.vrInit=!0},isPowerOf2:function(e){return 0===(e&e-1)},generateMipmap:function(e,n){this.isPowerOf2(n.width)&&this.isPowerOf2(n.height)?(e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},loadImage:function(e,n){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var t=0,o=e.RGBA,a=1,i=1,c=0,l=e.RGBA,u=e.UNSIGNED_BYTE,f=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,t,o,a,i,c,l,u,f),console.log("loaded tex"),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,t,o,l,u,n),this.generateMipmap(e,n),r},loadTexture:function(e,n){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var t=0,o=e.RGBA,a=1,i=1,c=0,l=e.RGBA,u=e.UNSIGNED_BYTE,f=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,t,o,a,i,c,l,u,f);var s=new Image,v=this;return s.onload=function(){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,t,o,l,u,s),v.generateMipmap(e,s)},s.src=n,r},getBillboardMatrix:function(e,n,r){var t=g["c"].subtract(g["c"].create(),n,e),o=g["c"].normalize(t,t),a=g["c"].cross(g["c"].create(),r,o),i=g["c"].cross(g["c"].create(),o,a);return g["a"].fromValues(a[0],a[1],a[2],0,i[0],i[1],i[2],0,o[0],o[1],o[2],0,e[0],e[1],e[2],1)}},m=r("bd2e"),x=r.n(m),y={name:"WebGl",data:function(){return{canvasWidth:600,canvasHeight:600,state:null,gl:null}},methods:{enableVr:function(){d.loopVr(this.gl,this.state)}},mounted:function(){var e=document.querySelector("#glcanvas"),n=e.getContext("webgl2",{xrCompatible:!0});this.gl=n,e.addEventListener("contextmenu",(function(e){e.preventDefault()}));var r=f.replace("//#PERLIN",s),t=u.replace("//#PERLIN",s),o=d.initShaderProgram(n,t,r);n.useProgram(o);var a=d.getProgramInfo(n,o),i=g["c"].fromValues(-1,-1,-1);g["c"].normalize(i,i);var c=[],v=[],m=[],y=[],w=d.getCylinderMesh(n,d.loadTexture(n,"models/pattern.png")),p=d.loadTexture(n,"models/flare.png"),h=new x.a;function b(e,n){}function T(e,n,r,t){e.uniform1f(a.uniformLocations.time,n.time),e.uniform3fv(a.uniformLocations.lightDirection,i),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);var o=0;if(null==r){r=g["a"].create();var u=g["c"].fromValues(0,-2,-5),f=g["c"].fromValues(0,1,0),s=g["c"].fromValues(-5*Math.sin(n.time),3,-5*Math.cos(n.time)-5);g["a"].lookAt(r,s,u,f)}null==t&&(t=g["a"].create(),g["a"].perspective(t,90*Math.PI/180,e.canvas.clientWidth/e.canvas.clientHeight,.1,1e3)),e.uniformMatrix4fv(a.uniformLocations.viewMatrix,!1,r),e.uniformMatrix4fv(a.uniformLocations.projectionMatrix,!1,t);var x=g["a"].invert(g["a"].create(),r),h=g["c"].fromValues(x[12],x[13],x[14]);e.uniformMatrix3fv(a.uniformLocations.cameraPosition,!1,h);var b=g["a"].create();g["b"].create();g["a"].identity(b),g["a"].scale(b,b,g["c"].fromValues(400,400,400)),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,4),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,b),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var T,P=Object(l["a"])(m);try{for(P.s();!(T=P.n()).done;){var E,R=T.value,A=Object(l["a"])(R);try{for(A.s();!(E=A.n()).done;){var _=E.value;d.drawMesh(e,a,_)}}catch(Z){A.e(Z)}finally{A.f()}}}catch(Z){P.e(Z)}finally{P.f()}var z=g["c"].fromValues(0,1,0);e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,5),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE),o=0;for(var M=0;M<2*Math.PI;M+=Math.PI/8){var C=32,L=g["c"].fromValues(C*Math.cos(M),8*Math.sin(n.time+o),C*Math.sin(M)),D=d.getBillboardMatrix(L,h,z);g["a"].scale(D,D,g["c"].fromValues(2,2,2)),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,D),e.uniform1f(a.uniformLocations.drawVariant,4*++o);var F,V=Object(l["a"])(y);try{for(V.s();!(F=V.n()).done;){var S,U=F.value,I=Object(l["a"])(U);try{for(I.s();!(S=I.n()).done;){var B=S.value;d.drawMesh(e,a,B,p)}}catch(Z){I.e(Z)}finally{I.f()}}}catch(Z){V.e(Z)}finally{V.f()}}e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,2);var O=20;o=0;for(var N=Math.PI/3;N<2*Math.PI-.001;N+=2*Math.PI/3)g["a"].identity(b),g["a"].translate(b,b,g["c"].fromValues(-O*Math.sin(N),-128,-O*Math.cos(N)-5)),g["a"].scale(b,b,g["c"].fromValues(4,4,4)),e.uniform1f(a.uniformLocations.drawVariant,4*++o),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,b),d.drawMesh(e,a,w);g["a"].identity(b),g["a"].translate(b,b,g["c"].fromValues(0,-4.2,-5)),g["a"].scale(b,b,g["c"].fromValues(8,8,8)),g["a"].rotateY(b,b,.1*-n.time),e.uniform1i(a.uniformLocations.enableLight,0),e.uniform1i(a.uniformLocations.drawMode,0),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,b),e.enable(e.DEPTH_TEST),e.disable(e.CULL_FACE);var q,j=Object(l["a"])(c);try{for(j.s();!(q=j.n()).done;){var X,Y=q.value,k=Object(l["a"])(Y);try{for(k.s();!(X=k.n()).done;){var W=X.value;d.drawMesh(e,a,W)}}catch(Z){k.e(Z)}finally{k.f()}}}catch(Z){j.e(Z)}finally{j.f()}g["a"].identity(b),g["a"].translate(b,b,g["c"].fromValues(0,-2,-5)),g["a"].rotateY(b,b,Math.PI/2-.1*n.time),e.uniform1i(a.uniformLocations.enableLight,1),e.uniform1i(a.uniformLocations.drawMode,3),e.disable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.uniformMatrix4fv(a.uniformLocations.modelMatrix,!1,b);var G,H=Object(l["a"])(v);try{for(H.s();!(G=H.n()).done;){var J,$=G.value,K=Object(l["a"])($);try{for(K.s();!(J=K.n()).done;){var Q=J.value;d.drawMesh(e,a,Q)}}catch(Z){K.e(Z)}finally{K.f()}}}catch(Z){H.e(Z)}finally{H.f()}}function P(e,n){e.clearColor(.1,.1,.1,1),e.enable(e.DEPTH_TEST),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}h.load("models/ganesha.gltf",(function(e){console.log("loading G...");var r,t=[],o=Object(l["a"])(e.scene.children);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=d.getMesh(n,a);null!=i&&t.push(i)}}catch(c){o.e(c)}finally{o.f()}v.push(t),console.log("loaded G!")})),h.load("models/space.gltf",(function(e){var r,t=[],o=Object(l["a"])(e.scene.children);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=d.getMesh(n,a);null!=i&&t.push(i)}}catch(c){o.e(c)}finally{o.f()}m.push(t)})),h.load("models/billboard.gltf",(function(e){var r,t=[],o=Object(l["a"])(e.scene.children);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=d.getMesh(n,a);null!=i&&t.push(i)}}catch(c){o.e(c)}finally{o.f()}y.push(t)})),h.load("models/mandala.gltf",(function(e){var r,t=[],o=Object(l["a"])(e.scene.children);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=d.getMesh(n,a);null!=i&&t.push(i)}}catch(u){o.e(u)}finally{o.f()}c.push(t)})),this.state=d.createState(P,T,b),d.loop(this.gl,this.state)}},w=y,p=(r("4631"),r("2877")),h=Object(p["a"])(w,i,c,!1,null,"8873b8ba",null),b=h.exports,T={name:"App",components:{WebGl:b}},P=T,E=Object(p["a"])(P,o,a,!1,null,null,null),R=E.exports;t["a"].config.productionTip=!1,new t["a"]({render:function(e){return e(R)}}).$mount("#app")},f212:function(e,n,r){}});
//# sourceMappingURL=app.3d700b22.js.map